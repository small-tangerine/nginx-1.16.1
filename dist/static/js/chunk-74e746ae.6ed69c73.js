(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74e746ae","chunk-a82d2712","chunk-4067da74","chunk-2d230fe7"],{"0363":function(e,t,r){},"03b3":function(e,t,r){"use strict";r.d(t,"g",(function(){return i})),r.d(t,"f",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"h",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"i",(function(){return p}));var s=r("b775");function i(e){return Object(s["a"])({url:"/category/list",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/category/level-list",method:"get",params:e})}function o(){return Object(s["a"])({url:"/category/select",method:"get"})}function n(e){return Object(s["a"])({url:"/category/create",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/category/update",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/category/delete",method:"post",data:{ids:e}})}function u(e,t){var r={id:e,isEnabled:t};return Object(s["a"])({url:"/system/sql-dict/status",method:"put",data:r})}function d(e){return Object(s["a"])({url:"/category/create",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/category/update",method:"post",data:e})}},"0835":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-upload",{ref:"imgUpload",class:{hide:e.showUpload},attrs:{action:"","http-request":e.uploadImg,"file-list":e.fileList,"list-type":"picture-card"},scopedSlots:e._u([{key:"file",fn:function(t){var s=t.file;return r("div",{},[r("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),r("span",{staticClass:"el-upload-list__item-actions"},[r("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(s)}}},[r("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?r("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove()}}},[r("i",{staticClass:"el-icon-delete"})]):e._e()])])}}])},[r("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),r("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],a=(r("a9e3"),r("a434"),r("b0c0"),r("3f5e")),o={name:"index",props:{typeId:{type:Number,require:!0},url:{type:String,require:!0},isAudit:{type:Boolean,default:!1}},data:function(){return{fileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1,courseForm:{title:void 0},showUpload:!1,file:void 0}},created:function(){this.setFileList(this.url)},methods:{setFileList:function(e){this.fileList.push({url:this.url}),this.showUpload=!0},onChange:function(e,t){t&&1===t.length&&(this.showUpload=!0),t.length>1&&"fail"!==e.status?t.splice(0,1):"fail"===e.status&&(this.$message.error("上传失败，请重新上传！"),t.splice(0,1)),this.file=t[0]},uploadImg:function(e){var t=this;this.showUpload=!0;var r=new FormData;r.append("image",e.file,e.file.name),Object(a["a"])(r).then((function(e){0===e.error?(t.$message.success(e.msg),t.$emit("uploadImage",e.data.url,t.typeId)):(t.$refs.imgUpload.clearFiles(),t.showUpload=!1)})).catch((function(){t.$refs.imgUpload.clearFiles(),t.showUpload=!1}))},handleRemove:function(){this.$refs.imgUpload.clearFiles(),this.showUpload=!1,this.fileList=[],this.$emit("uploadImage",void 0,this.typeId)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}},watch:{isAudit:{handler:function(e){this.disabled=!e},immediate:!0}}},n=o,l=(r("3365"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},1:function(e,t){},"1f34":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:query"],expression:"['sys:user:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:create"],expression:"['sys:user:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:update"],expression:"['sys:user:update']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handTopUpdate}},[e._v("修改 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:delete"],expression:"['sys:user:delete']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:reset:password"],expression:"['sys:user:reset:password']"}],attrs:{type:"warning",icon:"el-icon-switch-button",size:"mini",disabled:e.multiple},on:{click:e.handleResetPwd}},[e._v("重置密码 ")])],1),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:query"],expression:"['sys:user:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center","show-overflow-tooltip":!0,width:"50"}}),r("el-table-column",{attrs:{label:"用户账号",prop:"username",align:"center","show-overflow-tooltip":!0,width:"150"}}),r("el-table-column",{attrs:{label:"用户昵称",prop:"nickname",align:"center","show-overflow-tooltip":!0,width:"120"}}),r("el-table-column",{attrs:{label:"性别",prop:"sex",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("male"===t.row.sex?"男":"female"===t.row.sex?"女":"保密")+" ")]}}])}),r("el-table-column",{attrs:{label:"头像",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"40px",height:"40px",border:"none"},attrs:{src:e.row.avatar,"preview-src-list":[e.row.avatar]}})]}}])}),r("el-table-column",{attrs:{label:"手机号",prop:"mobile",align:"center","show-overflow-tooltip":!0,width:"120"}}),r("el-table-column",{attrs:{label:"邮箱",prop:"email",align:"center","show-overflow-tooltip":!0,width:"200"}}),r("el-table-column",{attrs:{label:"角色",prop:"roleTitle",align:"center","show-overflow-tooltip":!0,width:"100"}}),r("el-table-column",{attrs:{label:"注册时间",align:"center",prop:"createdAt",width:"150"}}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:view"],expression:"['sys:user:view']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(r){return e.handleView(t.row)}}},[e._v("用户详情 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:update"],expression:"['sys:user:update']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改用户 ")]),2===t.row.roleId?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:teacher-info"],expression:"['sys:user:teacher-info']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-paperclip"},on:{click:function(r){return e.handleTeacherInfo(t.row)}}},[e._v("讲师信息 ")]):e._e(),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:assign:role"],expression:"['sys:user:assign:role']"}],attrs:{size:"mini",type:"text",icon:"el-icon-circle-check"},on:{click:function(r){return e.handleRole(t.row)}}},[e._v("分配角色 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:delete"],expression:"['sys:user:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.cancelUser}},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.ruleValidate,"label-width":"80px"}},[r("el-form-item",{staticStyle:{display:"flex","align-items":"center"},attrs:{label:"用户头像",prop:"avatar"}},[r("avatar",{attrs:{avatar:e.userForm.avatar},on:{updateAvatar:e.updateAvatar}})],1),r("el-form-item",{attrs:{label:"用户账号",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),r("el-form-item",{attrs:{label:"昵称"}},[r("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色",clearable:""},model:{value:e.userForm.roleId,callback:function(t){e.$set(e.userForm,"roleId",t)},expression:"userForm.roleId"}},e._l(e.roleOptions,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.title,value:e.roleId}})})),1)],1),e.isUpdate?e._e():r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2",autocomplete:"off"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e.isUpdate?e._e():r("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[r("el-input",{attrs:{type:e.passwordType,placeholder:"请确认密码"},model:{value:e.userForm.checkPassword,callback:function(t){e.$set(e.userForm,"checkPassword",t)},expression:"userForm.checkPassword"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},[r("el-radio",{attrs:{label:"unknown"}},[e._v("未知")]),r("el-radio",{attrs:{label:"male"}},[e._v("男")]),r("el-radio",{attrs:{label:"female"}},[e._v("女")])],1)],1),e.isUpdate?e._e():r("el-form-item",{attrs:{label:"手机号"}},[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e.isUpdate?e._e():r("el-form-item",{attrs:{label:"邮箱 "}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e.isUpdate?r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1):e._e(),e.isUpdate?r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1):e._e(),r("el-form-item",{attrs:{label:"职位",prop:"job"}},[r("el-input",{attrs:{placeholder:"请输入职位"},model:{value:e.userForm.job,callback:function(t){e.$set(e.userForm,"job",t)},expression:"userForm.job"}})],1),r("el-form-item",{attrs:{label:"城市",prop:"city"}},[r("el-input",{attrs:{placeholder:"请输入城市"},model:{value:e.userForm.city,callback:function(t){e.$set(e.userForm,"city",t)},expression:"userForm.city"}})],1),r("el-form-item",{attrs:{label:"个性签名"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.userForm.signature,callback:function(t){e.$set(e.userForm,"signature",t)},expression:"userForm.signature"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelUser}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:e.title,visible:e.openRole,width:"350px","append-to-body":"","before-close":e.cancelRole},on:{"update:visible":function(t){e.openRole=t}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.openLoading,expression:"openLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择角色",clearable:""},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleOptions,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.title,value:e.roleId}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitRole}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelRole}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:"用户详情",visible:e.openDetail,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openDetail=t},close:e.cancelDetail}},[r("el-descriptions",{staticClass:"margin-top",attrs:{column:2,border:""}},[r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 用户账号 ")]),e._v(" "+e._s(e.form.username)+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 用户昵称 ")]),e._v(" "+e._s(e.form.nickname)+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 手机号 ")]),e._v(" "+e._s(e.form.mobile||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 邮箱 ")]),e._v(" "+e._s(e.form.email||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 性别 ")]),e._v(" "+e._s("male"===e.form.sex?"男":"female"===e.form.sex?"女":"未知")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 角色 ")]),e._v(" "+e._s(e.form.roleTitle)+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 城市 ")]),e._v(" "+e._s(e.form.city||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 职位 ")]),e._v(" "+e._s(e.form.job||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" UID ")]),e._v(" "+e._s(e.form.uid)+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 学习时长 ")]),e._v(" "+e._s(e._f("filterSecond")(e.form.learnHour))+" 分钟 ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 注册时间 ")]),e._v(" "+e._s(e.form.createdAt)+" ")],2),r("el-descriptions-item",{attrs:{span:2}},[r("template",{slot:"label"},[e._v(" 个性签名 ")]),e._v(" "+e._s(e.form.signature||"未设置")+" ")],2)],1)],1)],1)},i=[],a=r("5530"),o=(r("ac1f"),r("5319"),r("d81d"),r("c0c7")),n=r("2f62"),l=r("88c9"),c=r("3528"),u=r("77c0"),d=r("fa7d"),p={name:"User",components:{userAvatar:l["default"],avatar:u["a"]},data:function(){var e=this,t=function(t,r,s){e.userForm.password!==r?s(new Error("两次输入的密码不一致")):s()};return{tags:["danger","success","primary","info"],loading:!0,uploadImg:!1,passwordType:"password",ids:[],role:{},userForm:{},openDetail:!1,expands:[],loadingExpand:!1,single:!0,multiple:!0,userId:void 0,type:void 0,info:{},showSearch:!0,roleOptions:[],checkAll:!1,total:0,userList:[],title:"",marginLeft:0,open:!1,openDataScope:!1,openMenuScope:!1,menuExpand:!1,menuNodeAll:!1,resourceExpand:!1,resourceNodeAll:!1,sexOptions:[],lockedOptions:[],dateRange:[],statusOptions:[],menuOptions:[],menuCheckeds:[],permissionCheckeds:[],resourceOptions:[],queryParams:{page:1,pageSize:10,keyword:void 0,roleId:void 0},openRole:!1,openLoading:!1,form:{},defaultProps:{children:"children",label:"label"},isUpdate:!1,rules:{username:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],roleId:[{required:!0,message:"用户角色不能为空",trigger:"blur"}]},ruleValidate:{username:[{required:!0,message:"请输入用户账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],checkPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱号",trigger:"blur"},{type:"email",message:"邮箱不正确",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],roleId:[{required:!0,message:"用户角色不能为空",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:"^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$",message:"请输入正确的手机号码",trigger:"blur"}],signature:[{type:"string",max:250,message:"用户个性签名不能超过250个字",trigger:"blur"}]}}},created:function(){var e=this.$route.query&&this.$route.query.id;e?(this.queryParams.id=e,this.getList()):this.getList(),this.getRoleSelect()},computed:Object(a["a"])(Object(a["a"])({},Object(n["b"])(["id"])),Object(n["b"])(["name"])),filters:{filterSecond:function(e){return Object(d["b"])(e)}},methods:{updateAvatar:function(e){this.userForm.avatar=e},handleTeacherInfo:function(e){this.$router.push({path:"/system/user/teacher",query:{id:e.id},replace:!0})},getRoleSelect:function(){var e=this;Object(c["d"])().then((function(t){if(0===t.error){var r=t.data;e.roleOptions=r||[]}})).catch((function(){e.roleOptions=[]}))},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleView:function(e){this.reset(),this.openDetail=!0,Object.assign(this.form,e)},cancelDetail:function(){this.openDetail=!1},getRowKeys:function(e){return e.id},submitRole:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(o["a"])({userId:e.form.id,roleId:e.form.roleId}).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.openRole=!1,e.handleQuery())}))}))},handleRole:function(e){this.reset(),Object.assign(this.form,e),this.openRole=!0,this.title="分配用户角色"},getList:function(){var e=this;this.loading=!0,Object(o["e"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount;e.userList=a,e.total=o||0}e.loading=!1})).catch((function(){e.loading=!1,e.userList=[],e.total=0}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},cancelRole:function(){this.openRole=!1,this.cancel("form")},cancelUser:function(){this.open=!1,this.passwordType="password",this.cancel("userForm")},resetForm:function(){this.$refs["userForm"].resetFields(),this.reset()},cancel:function(e){this.$refs[e].clearValidate(),this.title=void 0,this.reset()},reset:function(){this.userForm={id:void 0,username:void 0,avatar:void 0,nickname:void 0,password:void 0,checkPassword:void 0,sex:"unknown",signature:"",mobile:void 0,email:void 0},this.form={roleId:1,title:void 0}},handleQuery:function(){this.expands=[],this.info={},this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],this.$router.replace("/system/user-list"),Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),1!==e.length?this.single=!0:(this.single=!1,this.role=e[0]),this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.isUpdate=!1,this.passwordType="",this.title="添加用户",this.userForm.avatar="http://localhost/image/default.png"},handTopUpdate:function(){this.handleUpdate(this.role)},handleUpdate:function(e){this.reset(),this.isUpdate=!0,Object.assign(this.userForm,e),this.open=!0,this.title="修改用户"},submitForm:function(){var e=this;this.$refs["userForm"].validate((function(t){t&&(e.userForm.id?Object(o["h"])(e.userForm).then((function(t){e.$message({message:t.msg,type:"success"}),e.cancelUser(),e.handleQuery()})):Object(o["b"])(e.userForm).then((function(t){e.$message({message:t.msg,type:"success"}),e.cancelUser(),e.handleQuery()})))}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除用户编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?Object(o["c"])([e.id]):Object(o["c"])(r)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))},handleResetPwd:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认重置编号为"'+r+'"的用户密码?',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(e){var t=e.value;return Object(o["f"])(r,t)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})})).catch((function(){}))},renderContent:function(e,t){var r=t.node,s=t.data;return s.path?e("span",[e("span",[r.label]),e("span",{style:"margin-left: 10px;"},[e("el-tag",{attrs:{size:"mini"}},[s.path])])]):e("span",[e("span",[r.label])])}}},m=p,f=(r("70e0"),r("2877")),h=Object(f["a"])(m,s,i,!1,null,"50d2083e",null);t["default"]=h.exports},2017:function(e,t,r){"use strict";r("cafe")},"26fc":function(e,t,r){e.exports=r.p+"static/img/404_cloud.0f4bc32b.png"},2879:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return n})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c}));var s=r("b775");function i(e){return Object(s["a"])({url:"/course-video/list",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/course-video/student-list",method:"get",params:e})}function o(e){return Object(s["a"])({url:"/course-video/create",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/course-video/update",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/course-video/audit",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/course-video/delete",method:"post",data:{id:e}})}},"28e5":function(e,t,r){"use strict";r("759f")},"310e":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleReturn}},[e._v("返回 ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.detailList}},[r("el-table-column",{attrs:{label:"详情编号",prop:"id",align:"center"}}),r("el-table-column",{attrs:{label:"订单号",prop:"code",align:"center",width:"200"}},[e._v(e._s(e.code))]),r("el-table-column",{attrs:{label:"课程名称",prop:"title",align:"center",width:"500"}}),r("el-table-column",{attrs:{label:"封面图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.row.img,"preview-src-list":[e.row.img]}})]}}])}),r("el-table-column",{attrs:{label:"课程原价",prop:"price",align:"center"}}),r("el-table-column",{attrs:{label:"是否有折扣",prop:"email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.isDiscount?"success":"danger"}},[e._v(e._s(1===t.row.isDiscount?"是":"否"))])]}}])}),r("el-table-column",{attrs:{label:"折扣价格",align:"center",prop:"discountPrice"}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt"}})],1)],1)},i=[],a=(r("ac1f"),r("5319"),r("f8b7")),o={name:"Detail",data:function(){return{loading:!0,total:0,detailList:[],code:void 0}},created:function(){var e=this.$route.query&&this.$route.query.id;this.code=this.$route.query&&this.$route.query.code,e&&this.getList(e)},methods:{handleReturn:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/order/order-list"})},getList:function(e){var t=this;this.loading=!0,Object(a["c"])({id:e}).then((function(e){var r=e||[],s=r.data;t.detailList=s||[],t.loading=!1})).catch((function(){t.detailList=data||[],t.loading=!1}))}}},n=o,l=r("2877"),c=Object(l["a"])(n,s,i,!1,null,"10d1f49a",null);t["default"]=c.exports},"32e1":function(e,t,r){"use strict";r("4854")},3365:function(e,t,r){"use strict";r("b271")},3528:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"g",(function(){return n})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return u}));var s=r("b775");function i(e){return Object(s["a"])({url:"/role/list",method:"get",params:e})}function a(){return Object(s["a"])({url:"/user/role-select",method:"get"})}function o(e){return Object(s["a"])({url:"/role/create",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/role/update",method:"post",data:e})}function l(e,t){return Object(s["a"])({url:"/role/permission-scope",method:"post",data:{id:e,resourceCollect:t}})}function c(e,t){return Object(s["a"])({url:"/system/role/menu-scope",method:"post",data:{id:e,menuCollect:t}})}function u(e){return Object(s["a"])({url:"/role/delete",method:"post",data:{resourceCollect:e}})}},"3f5e":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var s=r("b775");function i(e){return Object(s["a"])({url:"/file/image-upload",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/upload/merge",method:"post",data:e})}},4073:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{attrs:{gutter:10}},[r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{xs:30,sm:30,md:15,lg:24,xl:24}},[r("el-card",{staticClass:"box-card"},[r("el-descriptions",{staticClass:"margin-top",attrs:{title:"讲师课程"}}),r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:query"],expression:"['sys:course:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"审核状态",prop:"auditStatus"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("auditStatus")}},model:{value:e.queryParams.auditStatus,callback:function(t){e.$set(e.queryParams,"auditStatus",t)},expression:"queryParams.auditStatus"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.payStatus,attrs:{label:e.payStatusTitle,value:e.payStatus}})})),1)],1),r("el-form-item",{attrs:{label:"课程类型",prop:"type"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"类型",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("type")}},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.payType,attrs:{label:e.payTypeTitle,value:e.payType}})})),1)],1),r("el-form-item",{attrs:{label:"是否折扣",prop:"isDiscount"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"折扣",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("isDiscount")}},model:{value:e.queryParams.isDiscount,callback:function(t){e.$set(e.queryParams,"isDiscount",t)},expression:"queryParams.isDiscount"}},e._l(e.isDiscountOptions,(function(e){return r("el-option",{key:e.isDiscount,attrs:{label:e.isDiscountTitle,value:e.isDiscount}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:query"],expression:"['sys:course:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.courseList}},[r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center",width:"80","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"标题",prop:"title",align:"center",width:"350","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"封面",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.row.banner,"preview-src-list":[e.row.banner]}})]}}])}),r("el-table-column",{attrs:{label:"类型",prop:"note",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:2===t.row.type?"success":"info"}},[e._v(e._s(1===t.row.type?"免费课程":"付费课程"))])]}}])}),r("el-table-column",{attrs:{label:"课程原价",prop:"price",align:"center","show-overflow-tooltip":!0,width:"90"}}),r("el-table-column",{attrs:{label:"是否折扣",prop:"email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.isDiscount?"success":"danger"}},[e._v(e._s(1===t.row.isDiscount?"是":"否"))])]}}])}),r("el-table-column",{attrs:{label:"折扣价",prop:"discountPrice",align:"center","show-overflow-tooltip":!0,width:"90"}}),r("el-table-column",{attrs:{label:"审核状态",prop:"payTypeTitle",align:"center","show-overflow-tooltip":!0,width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.auditStatus?r("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"click",content:t.row.auditNotice}},[r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference",type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"},slot:"reference"},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过"))])],1):r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"}},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过"))])]}}])}),r("el-table-column",{attrs:{label:"学习人数",prop:"learnPersons",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.learnPersons>0?r("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(r){return e.goToStudent(t.row)}}},[e._v(e._s(t.row.learnPersons))]):r("span",[e._v(e._s(t.row.learnPersons))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1)},i=[],a=(r("a9e3"),r("cabd")),o={name:"Course",props:{userId:{type:Number,require:!0}},data:function(){return{loading:!0,ids:[],course:{},single:!0,multiple:!0,showSearch:!0,checkAll:!1,total:0,courseList:[],title:"",open:!1,openDataScope:!1,openMenuScope:!1,menuExpand:!1,menuNodeAll:!1,resourceExpand:!1,resourceNodeAll:!1,statusOptions:[{payStatus:1,payStatusTitle:"通过"},{payStatus:0,payStatusTitle:"未审核"},{payStatus:2,payStatusTitle:"不通过"}],typeOptions:[{payType:1,payTypeTitle:"免费"},{payType:2,payTypeTitle:"付费"}],isDiscountOptions:[{isDiscount:1,isDiscountTitle:"是"},{isDiscount:0,isDiscountTitle:"否"}],dateRange:[],unFree:0,free:0,queryParams:{page:1,pageSize:10,keyword:void 0,auditStatus:void 0,type:void 0,isDiscount:void 0,userId:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{title:[{required:!0,message:"课程名称不能为空",trigger:"blur"}]}}},created:function(){this.queryParams.userId=this.userId,this.getList()},methods:{goToStudent:function(e){this.$router.push({path:"/course/student-list",query:{id:e.id},replace:!0})},handleView:function(e){this.$router.push({path:"/course/detail",query:{id:e.id,code:e.code},replace:!0})},handleAudit:function(e){this.$router.push({path:"/course/detail/audit",query:{id:e.id,code:e.code},replace:!0})},getList:function(){var e=this;this.loading=!0,Object(a["f"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount,n=i.extra;e.courseList=a||[],e.total=o||0;var l=n||[],c=l.free,u=l.unFree;e.unFree=u||0,e.free=c||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.courseList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},cancel:function(){this.open=!1,this.$refs["form"].clearValidate(),this.reset()},cancelDataScope:function(e){"menu"===e&&(this.openMenuScope=!1),"resource"===e&&(this.openDataScope=!1),this.reset()},reset:function(){void 0!==this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),void 0!==this.$refs.resource&&this.$refs.resource.setCheckedKeys([]),this.menuExpand=!1,this.menuNodeAll=!1,this.resourceExpand=!1,this.resourceNodeAll=!1,this.form={id:void 0,title:void 0,menuCollect:[],resourceCollect:[],note:""}},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()}}},n=o,l=r("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);t["default"]=c.exports},"414e":function(e,t,r){"use strict";r("e964")},"41b29":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-descriptions",{attrs:{direction:"vertical",title:"添加课程"}},[r("template",{slot:"extra"},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:create"],expression:"['sys:course:create']"}],attrs:{type:"primary"},on:{click:e.submitCourse}},[e._v("提交")]),r("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.resetForm}},[e._v("重置")]),r("el-button",{attrs:{size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1)],2),r("el-form",{ref:"form",attrs:{model:e.courseForm,rules:e.rules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程名称",prop:"title"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入课程名称",autosize:{minRows:1,maxRows:6}},model:{value:e.courseForm.title,callback:function(t){e.$set(e.courseForm,"title",t)},expression:"courseForm.title"}})],1),r("el-form-item",{attrs:{label:"课程类型",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型",clearable:""},model:{value:e.courseForm.type,callback:function(t){e.$set(e.courseForm,"type",t)},expression:"courseForm.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.type,attrs:{label:e.title,value:e.type}})})),1)],1),2===e.courseForm.type?r("el-form-item",{attrs:{prop:"isDiscount",label:"是否折扣"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.isDiscount,callback:function(t){e.$set(e.courseForm,"isDiscount",t)},expression:"courseForm.isDiscount"}},e._l(e.isOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),r("el-form-item",{attrs:{prop:"recommend",label:"首页推荐"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.recommend,callback:function(t){e.$set(e.courseForm,"recommend",t)},expression:"courseForm.recommend"}},e._l(e.recommendOptions,(function(t){return r("el-option",{key:t.value,attrs:{disabled:1===t.value&&1===e.courseForm.type,label:t.label,value:t.value}})})),1)],1),e._l(e.extra.tips,(function(t,s){return r("el-form-item",{key:t.key,attrs:{label:"课程须知"+(s+1)}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:1,maxRows:6}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("i",0===s?{staticClass:"el-icon-circle-plus-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(t){return t.preventDefault(),e.addDomain("tips","课程须知最多六点",6)}}}:{staticClass:"el-icon-remove-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(r){return r.preventDefault(),e.removeDomain(t,"tips")}}})],1)}))],2),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程分类",prop:"categoryIds"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分类",options:e.options,props:{multiple:!0,emitPath:!1,value:"id",label:"title"},clearable:"",filterable:""},on:{change:e.changeCategory},model:{value:e.courseForm.categoryIds,callback:function(t){e.$set(e.courseForm,"categoryIds",t)},expression:"courseForm.categoryIds"}})],1),2===e.courseForm.type?r("el-form-item",{attrs:{label:"课程价格",prop:"price"}},[r("el-input",{attrs:{placeholder:"请输入课程价格"},model:{value:e.courseForm.price,callback:function(t){e.$set(e.courseForm,"price",t)},expression:"courseForm.price"}})],1):e._e(),1===e.courseForm.isDiscount?r("el-form-item",{attrs:{label:"折扣价格",prop:"discountPrice"}},[r("el-input",{attrs:{placeholder:"请输入课程折扣价格"},model:{value:e.courseForm.discountPrice,callback:function(t){e.$set(e.courseForm,"discountPrice",t)},expression:"courseForm.discountPrice"}})],1):e._e(),r("el-form-item",{attrs:{label:"是否完结",prop:"isFinish"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.isFinish,callback:function(t){e.$set(e.courseForm,"isFinish",t)},expression:"courseForm.isFinish"}},e._l(e.isOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._l(e.extra.learn,(function(t,s){return r("el-form-item",{key:t.key,attrs:{label:"学到什么"+(s+1)}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:1,maxRows:6}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("i",0===s?{staticClass:"el-icon-circle-plus-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(t){return t.preventDefault(),e.addDomain("learn","学到什么最多10点",10)}}}:{staticClass:"el-icon-remove-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(r){return r.preventDefault(),e.removeDomain(t,"learn")}}})],1)}))],2),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程别名"}},[r("el-input",{attrs:{placeholder:"请输入课程别名",autosize:{minRows:1,maxRows:6}},model:{value:e.courseForm.alias,callback:function(t){e.$set(e.courseForm,"alias",t)},expression:"courseForm.alias"}})],1),r("el-form-item",{attrs:{label:"课程简介",prop:"introduction"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:3,maxRows:8}},model:{value:e.courseForm.introduction,callback:function(t){e.$set(e.courseForm,"introduction",t)},expression:"courseForm.introduction"}})],1),r("el-form-item",{attrs:{label:"课程封面"}},[r("el-input",{staticStyle:{position:"absolute"},attrs:{type:"hidden"},model:{value:e.courseForm.banner,callback:function(t){e.$set(e.courseForm,"banner",t)},expression:"courseForm.banner"}}),r("image-upload",{attrs:{url:e.courseForm.banner,"type-id":1},on:{uploadImage:e.uploadImage}})],1),r("el-form-item",{attrs:{label:"课程详情背景"}},[r("el-input",{staticStyle:{position:"absolute"},attrs:{type:"hidden"},model:{value:e.courseForm.bgImg,callback:function(t){e.$set(e.courseForm,"bgImg",t)},expression:"courseForm.bgImg"}}),r("image-upload",{attrs:{url:e.courseForm.bgImg,"type-id":2},on:{uploadImage:e.uploadImage}})],1)],1)],1)],1)],1)},i=[],a=(r("a434"),r("ac1f"),r("5319"),r("d81d"),r("0835")),o=r("cabd"),n=r("03b3"),l={name:"edit",components:{ImageUpload:a["a"]},data:function(){return{extra:{tips:[{value:"",key:Date.now()}],learn:[{value:"",key:Date.now()}]},options:[],courseForm:{title:void 0,alias:void 0,introduction:void 0,type:void 0,price:void 0,isDiscount:void 0,discountPrice:void 0,recommend:void 0,categoryIds:[],bgImg:"http://localhost/image/20220307/5e1d991809c5318e40000800.png",banner:"http://localhost/image/20220307/5d31765d08c90cba06000338-360-202.jpg"},categoryIds:[],recommendOptions:[{value:1,label:"实战推荐"},{value:2,label:"新上好课"}],typeOptions:[{type:1,title:"免费"},{type:2,title:"付费"}],isOptions:[{value:1,label:"是"},{value:0,label:"否"}],rules:{title:[{required:!0,message:"课程名称不能为空",trigger:"blur"}],type:[{required:!0,message:"课程类型不能为空",trigger:"change"}],isDiscount:[{required:!0,message:"请选择是否折扣",trigger:"change"}],categoryIds:[{required:!0,message:"请选择课程分类",trigger:"change"}],discountPrice:[{required:!0,message:"请输入折扣价格",trigger:"blur"}],price:[{required:!0,message:"请输入课程价格",trigger:"blur"}]}}},created:function(){var e=this;Object(n["e"])().then((function(t){if(0===t.error){var r=t||{},s=r.data;e.options=s||[]}}))},methods:{uploadImage:function(e,t){1===t&&(this.courseForm.banner=e),2===t&&(this.courseForm.bgImg=e)},removeDomain:function(e,t){var r=this.extra[t].indexOf(e);-1!==r&&this.extra[t].splice(r,1)},changeCategory:function(e){this.categoryIds=e},addDomain:function(e,t,r){this.extra[e].length>=r?this.$message.warning(t):this.extra[e].push({value:"",key:Date.now()})},resetForm:function(){this.$refs.form.resetFields()},submitCourse:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=Object.assign({},e.courseForm);r.tipList=e.getValue(e.extra.tips),r.learnWhatList=e.getValue(e.extra.learn),r.categoryIds=e.categoryIds,Object(o["a"])(r).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.$store.dispatch("tagsView/delView",e.$route),e.$router.replace({path:"/course/course-list"}))}))}}))},getValue:function(e){return e.map((function(e){return e.value}))},returnGo:function(){var e=this;this.$confirm("确定要放弃当前编辑的信息吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("tagsView/delView",e.$route),e.$router.replace({path:"/course/course-list"})}))}}},c=l,u=r("2877"),d=Object(u["a"])(c,s,i,!1,null,"a6be009a",null);t["default"]=d.exports},"47db":function(e,t,r){},4854:function(e,t,r){},"4b3b":function(e,t,r){var s={"./404":"8cdb","./404.vue":"8cdb","./course/category-list":"6c08","./course/category-list/":"6c08","./course/category-list/dictDetail":"84b6","./course/category-list/dictDetail.vue":"84b6","./course/category-list/index":"6c08","./course/category-list/index.vue":"6c08","./course/course-list":"be13","./course/course-list/":"be13","./course/course-list/index":"be13","./course/course-list/index.vue":"be13","./course/detail":"b347","./course/detail/":"b347","./course/detail/add":"41b29","./course/detail/add/":"41b29","./course/detail/add/index":"41b29","./course/detail/add/index.vue":"41b29","./course/detail/edit":"c77b","./course/detail/edit/":"c77b","./course/detail/edit/index":"c77b","./course/detail/edit/index.vue":"c77b","./course/detail/index":"b347","./course/detail/index.vue":"b347","./course/student-list":"c070","./course/student-list/":"c070","./course/student-list/index":"c070","./course/student-list/index.vue":"c070","./course/video-list":"da3d","./course/video-list/":"da3d","./course/video-list/index":"da3d","./course/video-list/index.vue":"da3d","./course/video-student-list":"6d0c","./course/video-student-list/":"6d0c","./course/video-student-list/index":"6d0c","./course/video-student-list/index.vue":"6d0c","./dashboard":"9406","./dashboard/":"9406","./dashboard/admin":"3f2c","./dashboard/admin/":"3f2c","./dashboard/admin/index":"3f2c","./dashboard/admin/index.vue":"3f2c","./dashboard/components/BarChart":"5756","./dashboard/components/BarChart.vue":"5756","./dashboard/components/LineChart":"79cf","./dashboard/components/LineChart.vue":"79cf","./dashboard/components/PanelGroup":"3e3b","./dashboard/components/PanelGroup.vue":"3e3b","./dashboard/components/PieChart":"8e8b","./dashboard/components/PieChart.vue":"8e8b","./dashboard/components/RaddarChart":"1971","./dashboard/components/RaddarChart.vue":"1971","./dashboard/components/mixins/resize":"1e21","./dashboard/components/mixins/resize.js":"1e21","./dashboard/default":"6568","./dashboard/default/":"6568","./dashboard/default/index":"6568","./dashboard/default/index.vue":"6568","./dashboard/index":"9406","./dashboard/index.vue":"9406","./login":"9ed6","./login/":"9ed6","./login/index":"9ed6","./login/index.vue":"9ed6","./order/detail-list":"310e","./order/detail-list/":"310e","./order/detail-list/index":"310e","./order/detail-list/index.vue":"310e","./order/order-list":"ebfd","./order/order-list/":"ebfd","./order/order-list/index":"ebfd","./order/order-list/index.vue":"ebfd","./profile":"ecac","./profile/":"ecac","./profile/components/updateEmail":"0778","./profile/components/updateEmail.vue":"0778","./profile/components/updatePhone":"b59f","./profile/components/updatePhone.vue":"b59f","./profile/index":"ecac","./profile/index.vue":"ecac","./profile/resetPwd":"3823","./profile/resetPwd.vue":"3823","./profile/teacherInfo":"b330","./profile/teacherInfo.vue":"b330","./profile/userAvatar":"88c9","./profile/userAvatar.vue":"88c9","./profile/userInfo":"2dde","./profile/userInfo.vue":"2dde","./redirect":"ef3c","./redirect/":"ef3c","./redirect/index":"ef3c","./redirect/index.vue":"ef3c","./system/permission":"5fed","./system/permission/":"5fed","./system/permission/index":"5fed","./system/permission/index.vue":"5fed","./system/role/role-list":"a349","./system/role/role-list/":"a349","./system/role/role-list/index":"a349","./system/role/role-list/index.vue":"a349","./system/user":"1f34","./system/user/":"1f34","./system/user/index":"1f34","./system/user/index.vue":"1f34","./system/user/teacher":"9374","./system/user/teacher/":"9374","./system/user/teacher/course-list":"4073","./system/user/teacher/course-list/":"4073","./system/user/teacher/course-list/index":"4073","./system/user/teacher/course-list/index.vue":"4073","./system/user/teacher/index":"9374","./system/user/teacher/index.vue":"9374"};function i(e){var t=a(e);return r(t)}function a(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=a,e.exports=i,i.id="4b3b"},"5d5d":function(e,t,r){"use strict";r("ea75")},"5fed":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:query"],expression:"['sys:permission:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[r("el-form-item",{attrs:{label:"菜单名称",prop:"keyword"}},[r("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"状态",clearable:"",size:"small"},on:{change:e.handleQuery,clear:function(t){return e.clearParams("type")}},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.permissionTypeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:create"],expression:"['sys:permission:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:update"],expression:"['sys:permission:update']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handTopUpdate}},[e._v("修改 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:delete"],expression:"['sys:permission:delete']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:query"],expression:"['sys:permission:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.handleQuery}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.permissionList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{prop:"id",label:"菜单编号",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"title",label:"菜单名称","show-overflow-tooltip":!0,width:"160",align:"center"}}),r("el-table-column",{attrs:{prop:"enTitle",label:"菜单标签","show-overflow-tooltip":!0,width:"160",align:"center"}}),r("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!==t.row.typeId&&t.row.icon?r("svg-icon",{attrs:{"icon-class":t.row.icon}}):r("span",[e._v("未设置")])]}}])}),r("el-table-column",{attrs:{prop:"displayOrder",label:"排序",width:"60",align:"center"}}),r("el-table-column",{attrs:{prop:"path",label:"访问路径","show-overflow-tooltip":!0,align:"center"}}),r("el-table-column",{attrs:{prop:"component",label:"组件路径","show-overflow-tooltip":!0,align:"center"}}),e.checkPermission(["sys:permission:hidden"])?r("el-table-column",{attrs:{label:"是否隐藏",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!==t.row.typeId?r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(r){return e.handleHiddenStatusChange(t.row)}},model:{value:t.row.isHidden,callback:function(r){e.$set(t.row,"isHidden",r)},expression:"scope.row.isHidden"}}):e._e()]}}],null,!1,3931289227)}):e._e(),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"150"}}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:create"],expression:"['sys:permission:create']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),3!==t.row.typeId?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:create"],expression:"['sys:permission:create']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(r){return e.handleAdd(t.row)}}},[e._v("新增 ")]):e._e(),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:permission:delete"],expression:"['sys:permission:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[r("tree-select",{attrs:{options:e.permissionOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1),r("el-col",{attrs:{span:14}},[r("el-form-item",{attrs:{label:"菜单类型",prop:"typeId"}},[r("el-radio-group",{on:{change:function(t){return e.changeType(t,e.form)}},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},[r("el-radio",{attrs:{label:1}},[e._v("目录")]),r("el-radio",{attrs:{label:2}},[e._v("菜单")]),r("el-radio",{attrs:{label:3}},[e._v("按钮")])],1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"标签",prop:"enTitle"}},[r("el-input",{attrs:{placeholder:"请输入菜单标签"},model:{value:e.form.enTitle,callback:function(t){e.$set(e.form,"enTitle",t)},expression:"form.enTitle"}})],1)],1),r("el-col",{attrs:{span:24}},[3!==e.form.typeId?r("el-form-item",{attrs:{label:"菜单图标"}},[r("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[r("IconSelect",{ref:"iconSelect",on:{selected:e.selected}}),r("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?r("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":e.form.icon},slot:"prefix"}):r("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1):e._e()],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"显示排序",prop:"displayOrder"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.displayOrder,callback:function(t){e.$set(e.form,"displayOrder",t)},expression:"form.displayOrder"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.id&&!(3===e.form.typeId),expression:"!form.id && !(form.typeId === 3)"}],attrs:{label:"是否隐藏"}},[r("el-radio-group",{model:{value:e.form.isHidden,callback:function(t){e.$set(e.form,"isHidden",t)},expression:"form.isHidden"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:12}},[3!==e.form.typeId?r("el-form-item",{attrs:{label:"路由地址"}},[r("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1):e._e()],1),r("el-col",{attrs:{span:12}},[3!==e.form.typeId?r("el-form-item",{attrs:{label:"组件路径"}},[r("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1):e._e()],1),r("el-col",{attrs:{span:12}},[1===e.form.typeId?r("el-form-item",{attrs:{label:"重定向"}},[r("el-input",{attrs:{placeholder:"请输入重定向地址",maxlength:"50"},model:{value:e.form.redirect,callback:function(t){e.$set(e.form,"redirect",t)},expression:"form.redirect"}})],1):e._e()],1),r("el-col",{attrs:{span:12}},[3===e.form.typeId?r("el-form-item",{attrs:{label:"访问路径",prop:"path"}},[r("el-input",{attrs:{placeholder:"请输入访问路径"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1):e._e()],1),r("el-col",{attrs:{span:12}},[3===e.form.typeId?r("el-form-item",{attrs:{label:"权限标识",prop:"permissionTag"}},[r("el-input",{attrs:{placeholder:"请输入权限标识",maxlength:"50"},model:{value:e.form.permissionTag,callback:function(t){e.$set(e.form,"permissionTag",t)},expression:"form.permissionTag"}})],1):e._e()],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],a=(r("d81d"),r("b775"));function o(e){return Object(a["a"])({url:"/permission/list",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/permission/create",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/permission/update",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/permission/delete",method:"post",data:{ids:e}})}function u(e){var t={id:e};return Object(a["a"])({url:"/permission/hidden-status",method:"post",data:t})}var d=r("ca17"),p=r.n(d),m=(r("542c"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon-body"},[r("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[r("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),r("div",{staticClass:"icon-list"},e._l(e.iconList,(function(t,s){return r("div",{key:s,on:{click:function(r){return e.selectedIcon(t)}}},[r("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":t}}),r("span",[e._v(e._s(t))])],1)})),0)],1)}),f=[],h=(r("b0c0"),r("4de4"),r("d3b7"),r("caad"),r("2532"),r("ddb0"),r("ac1f"),r("466d"),r("51ff")),y=function(e){return e.keys()},v=/\.\/(.*)\.svg/,g=y(h).map((function(e){return e.match(v)[1]})),b=g,w={name:"IconSelect",data:function(){return{name:"",iconList:b}},methods:{filterIcons:function(){var e=this;this.iconList=b,this.name&&(this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})))},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=b}}},x=w,k=(r("bce5"),r("2877")),_=Object(k["a"])(x,m,f,!1,null,"0273f142",null),S=_.exports,$={name:"Menu",components:{TreeSelect:p.a,IconSelect:S},data:function(){return{loading:!0,showSearch:!0,single:!0,multiple:!0,permissionList:[],ids:[],permission:void 0,permissionOptions:[],permissionTypeOptions:[{value:1,label:"目录"},{value:2,label:"菜单"},{value:3,label:"按钮"}],title:"",open:!1,visibleOptions:[],statusOptions:[],methodOptions:[],total:0,queryParams:{pageSize:10,keyword:void 0,type:void 0},form:{},rules:{title:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],displayOrder:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"访问路径不能为空",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级",trigger:"change"}],component:[{required:!0,message:"组件路径不能为空",trigger:"blur"}],typeId:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}],permission:[{required:!0,message:"权限标识不能为空",trigger:"blur"},{pattern:"^[a-z]{4,15}:[a-z]{4,15}:[a-z]{4,15}$",message:"请输入正确的权限标识：*:*:*",trigger:"blur"}],enTitle:[{required:!0,message:"菜单标签不能为空",trigger:"blur"},{pattern:"^[a-zA-Z]{4,20}$",message:"请输入4-20位英文小写菜单标签",trigger:"blur"}]}}},created:function(){this.getList(),this.getTreeselect()},methods:{changeType:function(e,t){t.component=1===e?"Layout":""},selected:function(e){this.form.icon=e},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),1!==e.length?this.single=!0:(this.single=!1,this.permission=e[0]),this.multiple=!e.length},handleHiddenStatusChange:function(e){var t=this,r=1===e.isHidden?"隐藏":"显示";this.$confirm('确认要"'+r+'""'+e.title+'"菜单吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(e.id,e.isHidden,e.typeId)})).then((function(e){t.$message({message:e.msg,type:"success"}),t.handleQuery()})).catch((function(){e.isHidden=0===e.isHidden?1:0}))},getList:function(){var e=this;this.loading=!0,o(this.queryParams).then((function(t){if(0===t.error){var r=t.data,s=r||[];e.permissionList=e.handleTree(s||[],"id"),e.loading=!1}else e.permissionList=[],e.loading=!1})).catch((function(){e.permissionList=[],e.loading=!1}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.id,label:e.title,children:e.children,isDisabled:3===e.typeId}},getTreeselect:function(){var e=this;o().then((function(t){var r=t||[],s=r.data;e.permissionOptions=[];var i={id:0,title:"主类目",children:[]};i.children=e.handleTree(s||[],"id"),e.permissionOptions.push(i)}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={icon:"",enTitle:"",component:"",id:void 0,isHidden:0,title:"",displayOrder:999,typeId:void 0,permissionTag:"",parentId:0,path:"",redirect:"",note:""},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleAdd:function(e){this.reset(),this.getTreeselect(),e&&e.id?(this.form.parentId=e.id,this.form.typeId=2,this.form.component=""):(this.form.parentId=0,this.form.typeId=1,this.form.component="Layout"),this.open=!0,this.title="添加菜单"},handTopUpdate:function(){this.handleUpdate(this.permission)},handleUpdate:function(e){this.reset(),Object.assign(this.form,e),this.open=!0,this.title="修改菜单"},submitForm:function(){var e=this;this.form.children=void 0,this.$refs["form"].validate((function(t){t&&(void 0!==e.form.id?l(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})):n(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除菜单编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?c([e.id]):c(r)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))}}},q=$,P=(r("b28b"),Object(k["a"])(q,s,i,!1,null,null,null));t["default"]=P.exports},"629e":function(e,t,r){},"6c08":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-dialog",{attrs:{"append-to-body":"","before-close":e.cancelDict,visible:e.openDict,title:e.title,width:"500px"},on:{"update:visible":function(t){e.openDict=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"80px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"title"}},[r("el-input",{staticStyle:{width:"370px"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"分类排序",prop:"displayOrder"}},[r("el-input",{staticStyle:{width:"370px"},attrs:{type:"number",min:"0",max:"65535"},model:{value:e.form.displayOrder,callback:function(t){e.$set(e.form,"displayOrder",t)},expression:"form.displayOrder"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitDict}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelDict}},[e._v("取 消")])],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:30,sm:30,md:15,lg:13,xl:13}},[r("el-card",{staticClass:"box-card"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:query"],expression:"['sys:category:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"分类名称"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入分类名称",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:query"],expression:"['sys:category:query']"}],attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:query"],expression:"['sys:category:query']"}],attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v(" 重置 ")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:create"],expression:"['sys:category:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:update"],expression:"['sys:category:update']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handTopUpdate}},[e._v("修改 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:delete"],expression:"['sys:category:delete']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:query"],expression:"['sys:category:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.handleQuery}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.dictList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"id",label:"分类编号",align:"center"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"title",label:"分类名称",align:"center"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"displayOrder",label:"排序",align:"center"}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"180"}}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:update"],expression:"['sys:category:update']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:delete"],expression:"['sys:category:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1),r("el-col",{attrs:{xs:25,sm:25,md:9,lg:11,xl:11}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("二级分类")]),r("div",{staticStyle:{"margin-top":"5px"}},[e.checkPermission(["sys:category:level:query"])&&e.showDetailAdd?r("el-form",{ref:"queryForm",attrs:{model:e.detailParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入分类名称",clearable:"",size:"small"},on:{clear:function(t){return e.detail("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDetailQuery(t)}},model:{value:e.detailParams.keyword,callback:function(t){e.$set(e.detailParams,"keyword",t)},expression:"detailParams.keyword"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:level:query"],expression:"['sys:category:level:query']"}],attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleDetailQuery}},[e._v("搜索 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:level:query"],expression:"['sys:category:level:query']"}],attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetDetailQuery}},[e._v("重置 ")])],1)],1):e._e(),e.checkPermission(["sys:category:update"])&&e.showDetailAdd?r("el-button",{staticClass:"filter-item",staticStyle:{float:"right",padding:"4px 10px","margin-top":"-52px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.$refs.dictDetail&&e.$refs.dictDetail.openAdd()}}},[e._v("新增 ")]):e._e()],1)]),e.showDetailAdd?e._e():r("div",[r("div",{staticClass:"my-code"},[e._v("点击分类查看详情")])]),e.showDetailAdd?r("dictDetail",{ref:"dictDetail"}):e._e()],1)],1)],1)],1)},i=[],a=(r("d81d"),r("e350")),o=r("84b6"),n=r("03b3"),l={name:"Dict",components:{dictDetail:o["default"]},data:function(){return{loading:!1,openDict:!1,ids:[],showDetailAdd:!1,single:!0,multiple:!0,showSearch:!0,checkAll:!1,total:2,title:"",dict:[],form:{id:void 0,title:void 0,displayOrder:void 0,isEnabled:1,dictDesc:""},queryParams:{page:1,pageSize:5,keyword:void 0},detailParams:{page:1,pageSize:10,keyword:void 0},rules:{title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},dictList:[]}},created:function(){this.handleQuery(),this.showDetailAdd=!1},methods:{checkPermission:a["a"],beforeCrudRefresh:function(){var e=this;return this.$nextTick((function(){e.$refs.dictDetail.dictId=void 0,e.$refs.dictDetail.detailList=[]})),!0},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},detail:function(e){this.detailParams[e]=void 0,this.handleDetailQuery()},handleQuery:function(){this.$refs.dictDetail&&(this.$refs.dictDetail.detailList=[]),this.queryParams.page=1,this.queryParams.parentId=0,this.getList()},resetQuery:function(){Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleDetailQuery:function(){this.$refs.dictDetail&&this.$refs.dictDetail.getList(this.detailParams.keyword)},resetDetailQuery:function(){Object.assign(this.$data.detailParams,this.$options.data().detailParams),this.handleDetailQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),1!==e.length?this.single=!0:(this.single=!1,this.dict=e[0]),this.multiple=!e.length},handleStatusChange:function(e){var t=this,r=1===e.isEnabled?"启用":"停用";this.$confirm('确认要"'+r+'""'+e.fieldName+'"分类吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(n["c"])(e.id,e.isEnabled)})).then((function(e){t.$message({message:e.msg,type:"success"}),t.handleQuery()})).catch((function(){e.isEnabled=0===e.isEnabled?1:0}))},handleCurrentChange:function(e){var t=this;e&&(this.showDetailAdd=!0,this.$nextTick((function(){t.$refs.dictDetail.dictId=e.id,t.detailParams.keyword=void 0,t.$refs.dictDetail.getList()})))},reset:function(){this.form={id:void 0,title:void 0,fieldName:void 0,isEnabled:1,dictDesc:""}},cancelDict:function(){this.reset(),this.$refs["form"].clearValidate(),this.openDict=!1},submitDict:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.id?Object(n["h"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.openDict=!1,e.handleQuery()})):Object(n["a"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.openDict=!1,e.handleQuery()})))}))},getList:function(){var e=this;this.loading=!0,this.showDetailAdd=!1,Object(n["g"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount;e.dictList=a||[],e.total=o||0,e.loading=!1}})).catch((function(){e.dictList=[],e.total=0,e.loading=!1}))},handleAdd:function(){this.reset(),this.openDict=!0,this.title="添加分类"},handTopUpdate:function(){this.handleUpdate(this.dict)},handleUpdate:function(e){this.openDict=!0,Object.assign(this.form,e),this.title="修改分类"},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除分类编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?Object(n["d"])([e.id]):Object(n["d"])(r)})).then((function(e){t.handleQuery(),t.$message({message:e.msg,type:"success"})}))}}},c=l,u=(r("8c68"),r("2877")),d=Object(u["a"])(c,s,i,!1,null,"7f26abca",null);t["default"]=d.exports},"6d0c":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:student:query"],expression:"['sys:course:video:student:query']"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{staticStyle:{"margin-right":"-1px"},attrs:{type:"primary",size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.studentList}},[r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center",width:"80","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"学生名称",prop:"userTitle",align:"center",width:"150","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"视频标题",align:"center",prop:"videoTitle",width:"350","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"学习时长(分钟)",prop:"note",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("filterSecond")(t.row.learnLength||0))+" ")]}}])}),r("el-table-column",{attrs:{label:"累计学习时长(分钟)",prop:"note",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("filterSecond")(t.row.cumulativeDuration||0))+" ")]}}])}),r("el-table-column",{attrs:{label:"最近一次学习时间",align:"center",prop:"recentAt"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.updatedAt))])]}}])}),r("el-table-column",{attrs:{label:"首次学习时间",align:"center",prop:"createdAt"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},i=[],a=r("2879"),o=r("fa7d"),n={name:"StudentList",data:function(){return{loading:!0,student:{},total:0,studentList:[],queryParams:{page:1,pageSize:10,keyword:void 0,courseId:void 0},courseId:void 0,form:{},cost:0}},created:function(){var e=this.$route.query&&this.$route.query.id;e&&(this.courseId=e,this.queryParams.courseId=e),this.getList()},methods:{returnGo:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},getList:function(){var e=this;this.loading=!0,Object(a["e"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount,n=i.extra;e.studentList=a||[],e.total=o||0;var l=n||[],c=l.cost;e.cost=c||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.studentList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.queryParams.courseId=this.courseId,this.handleQuery()}},filters:{filterSecond:function(e){return Object(o["b"])(e)}}},l=n,c=r("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null);t["default"]=u.exports},"70e0":function(e,t,r){"use strict";r("7172")},7172:function(e,t,r){},"759f":function(e,t,r){},"77c0":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{on:{click:function(t){return e.editCropper()}}},[r("img",{staticClass:"img-circle img-lg",attrs:{src:e.avatar,title:"点击上传头像",alt:""}})]),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.open=t},opened:e.modalOpened}},[r("el-row",[r("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[e.visible?r("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,"auto-crop":e.options.autoCrop,"auto-crop-width":e.options.autoCropWidth,"auto-crop-height":e.options.autoCropHeight,"fixed-box":e.options.fixedBox,"info-true":!0,enlarge:"1"},on:{realTime:e.realTime}}):e._e()],1),r("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[r("div",{staticClass:"avatar-upload-preview"},[r("img",{style:e.previews.img,attrs:{src:e.previews.url,alt:""}})])])],1),r("br"),r("el-row",[r("el-col",{attrs:{lg:2,md:2}},[r("el-upload",{attrs:{action:"#","http-request":e.requestUpload,"show-file-list":!1,"before-upload":e.beforeUpload}},[r("el-button",{attrs:{size:"small"}},[e._v(" 上传 "),r("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),r("el-col",{attrs:{lg:{span:1,offset:2},md:2}},[r("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.changeScale(1)}}})],1),r("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.changeScale(-1)}}})],1),r("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(t){return e.rotateLeft()}}})],1),r("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[r("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){return e.rotateRight()}}})],1),r("el-col",{attrs:{lg:{span:2,offset:6},md:2}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uploadImg()}}},[e._v("提 交")])],1)],1)],1)],1)},i=[],a=(r("b0c0"),r("4360")),o=r("7e79"),n=r("ed08"),l=r("c24f"),c={components:{VueCropper:o["VueCropper"]},props:{avatar:{type:String,require:!0}},data:function(){return{fileName:Object(n["d"])(a["a"].getters.avatar),open:!1,visible:!0,title:"修改头像",options:{img:this.avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{editCropper:function(){this.open=!0},modalOpened:function(){this.visible=!0},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload:function(e){var t=this;if(-1===e.type.indexOf("image/"))this.$message.error("请上传正确的图片");else{this.fileName=e.name;var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t.options.img=r.result}}},uploadImg:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var r=new FormData;r.append("image",t,e.fileName),Object(l["k"])(r).then((function(t){0===t.error&&(e.$message.success(t.msg),e.open=!1,e.options.img=t.data.url,e.previews.url=t.data.url,e.$emit("updateAvatar",t.data.url),e.visible=!1)}))}))},realTime:function(e){this.previews=e}}},u=c,d=r("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);t["a"]=p.exports},"7fc8":function(e,t,r){},"84b6":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("el-dialog",{attrs:{"append-to-body":"","before-close":e.cancelDetail,visible:e.openDetail,title:e.title,width:"500px"},on:{"update:visible":function(t){e.openDetail=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"120px"}},[r("el-form-item",{attrs:{label:"二级分类名称",prop:"title"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"二级分类排序",prop:"displayOrder"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",min:"0",max:"65535"},model:{value:e.form.displayOrder,callback:function(t){e.$set(e.form,"displayOrder",e._n(t))},expression:"form.displayOrder"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitDetail}},[e._v("确认")]),r("el-button",{on:{click:e.cancelDetail}},[e._v("取消")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dictLoading,expression:"dictLoading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.detailList,"highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"id",label:"分类编号",align:"center",width:"80"}}),r("el-table-column",{attrs:{prop:"title",label:"分类名称",align:"center",width:"120","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"displayOrder",label:"排序",align:"center",width:"50"}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"180"}}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:update"],expression:"['sys:category:update']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:category:delete"],expression:"['sys:category:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:function(t){return e.getDetailList(void 0)}}})],1)])},i=[],a=(r("ac1f"),r("00b4"),r("03b3")),o={data:function(){return{openDetail:!1,title:"",query:{dictName:""},dictId:void 0,dictLoading:!1,detailList:[],total:0,queryParams:{page:1,pageSize:10,keyword:void 0,parentId:0},form:{},rules:{title:[{required:!0,message:"请输入二级分类名称",trigger:"blur"}]}}},methods:{cancelDetail:function(){this.reset(),this.$refs["form"].clearValidate(),this.openDetail=!1},submitDetail:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0===e.form.id?(e.form.parentId=e.dictId,Object(a["b"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.openDetail=!1,e.getDetailList()}))):Object(a["i"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.openDetail=!1,e.getDetailList()})))}))},getList:function(e){this.queryParams.page=1,this.queryParams.pageSize=10,this.getDetailList(e)},getDetailList:function(e){var t=this;this.dictLoading=!0,this.queryParams.parentId=this.dictId,this.queryParams.keyword=e,Object(a["f"])(this.queryParams).then((function(e){if(0===e.error){var r=e||[],s=r.data,i=s||[],a=i.items,o=i.totalCount;t.detailList=a||[],t.total=o||0,t.dictLoading=!1}})).catch((function(){t.detailList=[],t.total=0,t.dictLoading=!1}))},reset:function(){this.form={id:void 0,title:void 0,displayOrder:void 0}},openAdd:function(){this.reset(),this.openDetail=!0,this.title="添加二级分类"},handleStatusChange:function(e){var t=this,r=1===e.isEnabled?"启用":"停用";this.$confirm('确认要"'+r+'""'+e.displayOrder+'"二级分类吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["c"])(e.id,e.isEnabled)})).then((function(e){t.getDetailList(),t.$message({message:e.msg,type:"success"})})).catch((function(){e.isEnabled=0===e.isEnabled?1:0}))},handleUpdate:function(e){this.reset(),Object.assign(this.form,e),this.openDetail=!0,this.title="修改二级分类"},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除二级分类编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?Object(a["d"])([e.id]):Object(a["d"])(r)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))}}},n=o,l=(r("a740"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,"774f412a",null);t["default"]=c.exports},"8c68":function(e,t,r){"use strict";r("e2c8")},"8cdb":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wscn-http404-container"},[r("div",{staticClass:"wscn-http404"},[e._m(0),r("div",{staticClass:"bullshit"},[r("div",{staticClass:"bullshit__oops"},[e._v(e._s(e.$t("errorPage.oops")))]),r("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.$t("errorPage.message")))]),r("a",{staticClass:"bullshit__return-home",attrs:{href:"/manager/dashboard"}},[e._v(e._s(e.$t("errorPage.back2home")))])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pic-404"},[s("img",{staticClass:"pic-404__parent",attrs:{src:r("a36b"),alt:"404"}}),s("img",{staticClass:"pic-404__child left",attrs:{src:r("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child mid",attrs:{src:r("26fc"),alt:"404"}}),s("img",{staticClass:"pic-404__child right",attrs:{src:r("26fc"),alt:"404"}})])}],a={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},o=a,n=(r("28e5"),r("2877")),l=Object(n["a"])(o,s,i,!1,null,"b04db370",null);t["default"]=l.exports},9374:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-descriptions",{staticClass:"margin-top",staticStyle:{"margin-bottom":"5px"},attrs:{title:"讲师信息",column:4,border:""}},[r("template",{slot:"extra"},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:user:teacher:update"],expression:"['sys:user:teacher:update']"}],attrs:{type:"info",size:"mini"},on:{click:e.handleUpdate}},[e._v("修改")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.returnUser}},[e._v("返回")])],1),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-picture-outline"}),e._v(" 讲师头像 ")]),r("el-image",{staticStyle:{width:"40px",height:"40px",border:"none"},attrs:{src:e.teacher.avatar,"preview-src-list":[e.teacher.avatar]}})],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-user"}),e._v(" 讲师名称 ")]),e._v(" "+e._s(e.teacher.name||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-suitcase-1"}),e._v(" 职位 ")]),e._v(" "+e._s(e.teacher.job||"未设置")+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-s-custom"}),e._v(" 讲师简介 ")]),e._v(" "+e._s(e.teacher.introduction||"未设置")+" ")],2)],2),r("el-dialog",{attrs:{title:"修改讲师信息",visible:e.openUpdate,width:"500px","append-to-body":"","before-close":e.cancelUpdate},on:{"update:visible":function(t){e.openUpdate=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{staticStyle:{display:"flex","align-items":"center"},attrs:{label:"讲师头像",prop:"avatar"}},[r("avatar",{attrs:{avatar:e.form.avatar},on:{updateAvatar:e.updateAvatar}})],1),r("el-form-item",{attrs:{label:"讲师名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入讲师名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"讲师职位",prop:"job"}},[r("el-input",{attrs:{placeholder:"请输入职位"},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),r("el-form-item",{attrs:{label:"讲师简介",prop:"introduction"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:1,maxRows:6}},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitTeacher}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelUpdate}},[e._v("取 消")])],1)],1),r("course-list",{attrs:{userId:e.userId}})],1)},i=[],a=(r("ac1f"),r("5319"),r("4073")),o=r("c0c7"),n=r("77c0"),l={components:{courseList:a["default"],Avatar:n["a"]},data:function(){return{teacher:{},avatar:void 0,openUpdate:!1,userId:void 0,form:{name:void 0,avatar:void 0,job:void 0,introduction:void 0},rules:{name:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],roleId:[{required:!0,message:"用户角色不能为空",trigger:"blur"}]}}},created:function(){var e=this.$route.query&&this.$route.query.id;e&&(this.userId=e-0,this.teacherInfo(e))},methods:{handleUpdate:function(){Object.assign(this.form,this.teacher),this.openUpdate=!0},cancelUpdate:function(){this.$refs.form.clearValidate(),this.openUpdate=!1},submitTeacher:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(o["g"])(e.form).then((function(t){0===t.error&&(e.$message.success(t.msg),e.cancelUpdate(),e.teacherInfo(e.userId))}))}))},updateAvatar:function(e){this.form.avatar=e},teacherInfo:function(e){var t=this;Object(o["d"])(e).then((function(e){if(0===e.error){var r=e||[],s=r.data;t.teacher=s||{}}else t.returnUser()})).catch((function(){t.teacher={},t.returnUser()}))},returnUser:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/system/user-list"})}}},c=l,u=r("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null);t["default"]=d.exports},9811:function(e,t,r){"use strict";r("ae22")},"9ed6":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[r("div",{staticClass:"title-container"},[r("h3",{staticClass:"title"},[e._v(e._s(e.$t("navbar.logoTitle")))])]),r("el-form-item",{attrs:{prop:"username"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"user"}})],1),r("el-input",{ref:"username",attrs:{placeholder:"账号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e.isReset?r("el-form-item",{staticClass:"verify-code",attrs:{prop:"verifyCode"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"validCode"}})],1),r("el-input",{ref:"verifyCode",attrs:{type:"text",placeholder:"验证码",name:"verifyCode",tabindex:"1","auto-complete":"off"},model:{value:e.loginForm.verifyCode,callback:function(t){e.$set(e.loginForm,"verifyCode",t)},expression:"loginForm.verifyCode"}}),r("span",{style:{cursor:e.isDisabled?"":"pointer","pointer-events":e.isDisabled?"none":"auto",color:e.isDisabled?"#C0C4CC":"#fff"},attrs:{disabled:e.isDisabled},on:{click:e.sendCode}},[e._v(e._s(e.buttonText))])],1):e._e(),r("el-form-item",{attrs:{prop:"password"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e.isReset?r("el-form-item",{attrs:{prop:"checkPassword"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"check-password"}})],1),r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"确认密码",name:"checkPassword",tabindex:"2","auto-complete":"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.checkPassword,callback:function(t){e.$set(e.loginForm,"checkPassword",t)},expression:"loginForm.checkPassword"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1):e._e(),e.isReset?r("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleResetPassword(t)}}},[e._v("重置密码")]):r("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(e._s(e.$t("login.logIn")))]),r("div",{staticStyle:{position:"relative"}},[r("span",{staticClass:"platform-button"},[r("svg-icon",{attrs:{"icon-class":"guide"}}),e._v(" "),r("a",{attrs:{href:"/"}},[e._v(e._s(e.$t("login.platform")))])],1),e.isReset?r("span",{staticClass:"thirdparty-button",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.resetPassword(!1)}}},[e._v("返回登录")]):r("span",{staticClass:"thirdparty-button",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.resetPassword(!0)}}},[e._v("忘记密码")])])],1)],1)},i=[],a=(r("498a"),r("c24f")),o={name:"Login",data:function(){var e=this,t=function(e,t,r){t&&0!==t.trim().length?r():r(new Error("请输入账号"))},r=function(e,t,r){t&&0!==t.trim().length?r():r(new Error("请输入密码"))},s=function(t,r,s){r&&0!==r.trim().length?r!==e.loginForm.password?s(new Error("两次密码不一致")):s():s(new Error("请再次输入密码"))};return{isDisabled:!1,flag:!0,buttonText:"发送验证码",loginForm:{username:void 0,password:void 0,checkPassword:void 0,verifyCode:void 0},isReset:!1,loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:r}],verifyCode:[{required:!0,trigger:"blur",message:"请输入验证码"}],checkPassword:[{required:!0,trigger:"blur",validator:s}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{sendCode:function(){var e=this;this.$refs["loginForm"].validateField("username",(function(t){if(!t){var r=60;if(e.buttonText="重新发送 "+r,e.isDisabled=!0,e.flag){e.flag=!1;var s=setInterval((function(){r--,e.buttonText="重新发送 "+r,0===r&&(clearInterval(s),e.buttonText="重新发送",e.isDisabled=!1,e.flag=!0)}),1e3)}}}))},resetPassword:function(e){this.isReset=e,this.$refs.loginForm.resetFields()},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleResetPassword:function(){var e=this;this.$refs["loginForm"].validate((function(t){t&&(e.loading=!0,Object(a["e"])(e.loginForm).then((function(t){0===t.error&&(e.$router.push({path:"/login"}),e.$message.success(t.msg)),e.loading=!1,e.isReset=!1})).catch((function(){e.loading=!1})))}))},handleLogin:function(){var e=this;this.loginForm.checkPassword=void 0,this.loginForm.verifyCode=void 0,this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))}}},n=o,l=(r("2017"),r("5d5d"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,"52cb6da6",null);t["default"]=c.exports},a349:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:query"],expression:"['sys:role:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"title"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("title")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:create"],expression:"['sys:role:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:update"],expression:"['sys:role:update']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handTopUpdate}},[e._v("修改 ")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:delete"],expression:"['sys:role:delete']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:query"],expression:"['sys:role:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.roleList},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"角色编号",prop:"id",align:"center",width:"120",sortable:""}}),r("el-table-column",{attrs:{label:"角色名称",prop:"title",align:"center","show-overflow-tooltip":!0,width:"150"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"note",align:"center","show-overflow-tooltip":!0,width:"250"}}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"180",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.updatedAt))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:update"],expression:"['sys:role:update']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),e.checkPermission(["sys:role:permission"])&&e.checkPermission(["sys:role:menu:list"])?r("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-circle-check"},on:{click:function(r){return e.handleDataScope(t.row)}}},[e._v("分配权限 ")]):e._e(),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:role:delete"],expression:"['sys:role:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":"","before-close":e.cancel},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"角色描述"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:e.title,visible:e.openMenuScope,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.openMenuScope=t},close:function(t){return e.handleCheckedTreeExpand(!1,"menu")}}},[r("el-form",{attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",[r("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeExpand(t,"menu")}},model:{value:e.menuExpand,callback:function(t){e.menuExpand=t},expression:"menuExpand"}},[e._v("展开/折叠")]),r("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeNodeAll(t,"menu")}},model:{value:e.menuNodeAll,callback:function(t){e.menuNodeAll=t},expression:"menuNodeAll"}},[e._v("全选/全不选")]),r("el-tree",{ref:"menu",staticClass:"tree-border",attrs:{data:e.menuOptions,"show-checkbox":"","default-checked-keys":e.menuCheckeds,"node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitMenuScope}},[e._v("确 定")]),r("el-button",{on:{click:function(t){return e.cancelDataScope("menu")}}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:e.title,visible:e.openDataScope,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openDataScope=t},close:function(t){return e.handleCheckedTreeExpand(!1,"resource")}}},[r("el-form",{attrs:{model:e.form}},[r("el-form-item",[r("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeExpand(t,"resource")}},model:{value:e.resourceExpand,callback:function(t){e.resourceExpand=t},expression:"resourceExpand"}},[e._v("展开/折叠 ")]),r("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeNodeAll(t,"resource")}},model:{value:e.resourceNodeAll,callback:function(t){e.resourceNodeAll=t},expression:"resourceNodeAll"}},[e._v("全选/全不选 ")]),r("el-tree",{ref:"resource",staticClass:"tree-border",attrs:{data:e.resourceOptions,"show-checkbox":"","default-checked-keys":e.permissionCheckeds,"render-content":e.renderContent,"node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitDataScope}},[e._v("确 定")]),r("el-button",{on:{click:function(t){return e.cancelDataScope("resource")}}},[e._v("取 消")])],1)],1)],1)},i=[],a=r("1da1"),o=(r("96cf"),r("d81d"),r("d3b7"),r("159b"),r("e9c4"),r("3528")),n=r("b775");function l(){return Object(n["a"])({url:"/role/menu-list",method:"get"})}r("e350");var c={name:"Role",data:function(){return{loading:!0,ids:[],role:{},single:!0,multiple:!0,showSearch:!0,checkAll:!1,total:0,roleList:[],title:"",open:!1,openDataScope:!1,openMenuScope:!1,menuExpand:!1,menuNodeAll:!1,resourceExpand:!1,resourceNodeAll:!1,dateRange:[],statusOptions:[],menuOptions:[],menuCheckeds:[],permissionCheckeds:[],resourceOptions:[],queryParams:{pageNum:1,pageSize:10,keyword:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{title:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getPermissionTree()},methods:{getList:function(){var e=this;this.loading=!0,Object(o["e"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount;e.roleList=a||[],e.total=o||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.roleList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},getPermissionTree:function(){var e=this;l().then((function(t){if(0===t.error){var r=t.data;e.resourceOptions=r||[]}})).catch((function(){e.resourceOptions=[]}))},getMenuAllCheckedKeys:function(){var e=this.$refs.menu.getCheckedKeys(),t=this.$refs.menu.getHalfCheckedKeys();return e.unshift.apply(e,t),e},getPermissionAllCheckedKeys:function(){var e=this.$refs.resource.getCheckedKeys(),t=this.$refs.resource.getHalfCheckedKeys();return e.unshift.apply(e,t),e},cancel:function(){this.open=!1,this.$refs["form"].clearValidate(),this.reset()},cancelDataScope:function(e){"menu"===e&&(this.openMenuScope=!1),"resource"===e&&(this.openDataScope=!1),this.reset()},reset:function(){void 0!==this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),void 0!==this.$refs.resource&&this.$refs.resource.setCheckedKeys([]),this.menuExpand=!1,this.menuNodeAll=!1,this.resourceExpand=!1,this.resourceNodeAll=!1,this.form={id:void 0,title:void 0,menuCollect:[],resourceCollect:[],note:""}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),1!==e.length?this.single=!0:(this.single=!1,this.role=e[0]),this.multiple=!e.length},handleCheckedTreeExpand:function(e,t){if("menu"===t)for(var r=this.menuOptions,s=0;s<r.length;s++)this.$refs.menu.store.nodesMap[r[s].id].expanded=e;else if("resource"===t)for(var i=this.resourceOptions,a=0;a<i.length;a++)this.$refs.resource.store.nodesMap[i[a].id].expanded=e},handleCheckedTreeNodeAll:function(e,t){"menu"===t?this.$refs.menu.setCheckedNodes(e?this.menuOptions:[]):"resource"===t&&this.$refs.resource.setCheckedNodes(e?this.resourceOptions:[])},handleAdd:function(){this.reset(),this.open=!0,this.title="添加角色"},handTopUpdate:function(){this.handleUpdate(this.role)},handleUpdate:function(e){this.reset(),Object.assign(this.form,e),this.open=!0,this.title="修改角色"},handleDataScope:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.reset();case 2:t.form=e,t.openDataScope=!0,t.$nextTick((function(){var r=[],s=e.resourceCollect||[];s.forEach((function(e){var s=t.$refs.resource.getNode(e);s&&s.isLeaf&&r.push(e)})),t.permissionCheckeds=r})),t.title="分配角色访问权限";case 6:case"end":return r.stop()}}),r)})))()},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.id?Object(o["g"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})):(e.form.menuCollect=void 0,e.form.resourceCollect=void 0,Object(o["a"])(e.form).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList())}))))}))},submitDataScope:function(){var e=this;if(void 0!==this.form.id){var t=this.getPermissionAllCheckedKeys();Object(o["b"])(this.form.id,t).then((function(t){e.$message({message:t.msg,type:"success"}),e.openDataScope=!1,e.getList()}))}},submitMenuScope:function(){var e=this,t=JSON.stringify(this.getMenuAllCheckedKeys());Object(o["f"])(this.form.id,t).then((function(t){e.$message({message:t.msg,type:"success"}),e.openMenuScope=!1,e.getList()}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除角色编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?Object(o["c"])([e.id]):Object(o["c"])(r)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))},renderContent:function(e,t){var r=t.node,s=t.data;return s.path?e("span",[e("span",[r.label]),e("span",{style:"margin-left: 10px;"},[e("el-tag",{attrs:{size:"mini"}},[s.path])])]):e("span",[e("span",[r.label])])}}},u=c,d=(r("aa0b"),r("2877")),p=Object(d["a"])(u,s,i,!1,null,"7ad78aad",null);t["default"]=p.exports},a36b:function(e,t,r){e.exports=r.p+"static/img/404.a57b6f31.png"},a740:function(e,t,r){"use strict";r("faa5")},aa0b:function(e,t,r){"use strict";r("e8b2")},ae22:function(e,t,r){},b271:function(e,t,r){},b28b:function(e,t,r){"use strict";r("0363")},b327:function(e,t,r){"use strict";r("47db")},b347:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e.course&&e.course.id?r("el-descriptions",{staticClass:"margin-top",attrs:{direction:"vertical",title:"课程信息详情",column:4,border:""}},[r("template",{slot:"extra"},[0===e.status?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:audit"],expression:"['sys:course:audit']"}],staticStyle:{"margin-right":"20px"},attrs:{type:"danger",size:"large"},on:{click:e.openAudit}},[e._v("审核")]):e._e(),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程名称 ")]),e._v(" "+e._s(e.course.title)+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程别名 ")]),e._v(" "+e._s(e.course.alias)+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程审核状态 ")]),r("el-tag",{attrs:{type:0===e.course.auditStatus?"warning":1===e.course.auditStatus?"success":"danger"}},[e._v(" "+e._s(e.course.auditStatusTitle)+" ")])],2),r("el-descriptions-item",{attrs:{span:2}},[r("template",{slot:"label"},[e._v(" 课程审核备注 ")]),e._v(" "+e._s(e.course.auditNotice||"暂无")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程封面 ")]),e.course.banner?r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.course.banner,"preview-src-list":[e.course.banner]}}):r("span",[e._v("未设置")])],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程背景 ")]),e.course.bgImg?r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.course.bgImg,"preview-src-list":[e.course.bgImg]}}):r("span",[e._v("未设置")])],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程类型 ")]),r("el-tag",{attrs:{type:2===e.course.type?"success":"info"}},[e._v(e._s(e.course.typeTitle))])],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 学习人数 ")]),e._v(" "+e._s(e.course.learnPersons||0)+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程是否完结 ")]),e._v(" "+e._s(1===e.course.isFinish?"已完结":"未完结")+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 课程原价 ")]),2===e.course.type?r("span",[e._v(e._s(e.course.price?"￥"+e.course.price:"未设置"))]):r("span",[e._v("无")])],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 是否折扣 ")]),e._v(" "+e._s(1===e.course.isDiscount?"是":"否")+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"center"}}},[r("template",{slot:"label"},[e._v(" 折扣价格 ")]),e._v(" "+e._s(e.course.discountPrice?"￥"+e.course.discountPrice:"无")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"white-space":"pre-line"}}},[r("template",{slot:"label"},[e._v(" 课程须知 ")]),e._v(" "+e._s(e.course.tip||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"white-space":"pre-line"}}},[r("template",{slot:"label"},[e._v(" 能学到什么 ")]),e._v(" "+e._s(e.course.learnWhat||"未设置")+" ")],2),r("el-descriptions-item",{attrs:{contentStyle:{"text-align":"left"}}},[r("template",{slot:"label"},[e._v(" 课程讲师 ")]),e.course&&e.course.teacher?r("span",[r("span",[e._v("讲师名称： "+e._s(e.course.teacher.name||"未设置"))]),r("br"),r("span",[e._v("讲师职位： "+e._s(e.course.teacher.job||"未设置"))]),r("br"),r("span",[e._v("讲师简介： "+e._s(e.course.teacher.introduction||"未设置"))])]):r("span",[e._v("暂无")])],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"left"}}},[r("template",{slot:"label"},[e._v(" 课程视频 ("+e._s(e.course.videoCount||0)+") ")]),e.course.video&&(e.course.video||[]).length>0?r("span",e._l(e.course.video,(function(t,s){return r("span",{key:s},[e._v(" "+e._s(s+1)+"、"+e._s(t.title)+"("+e._s(e._f("filterSecond")(t.videoLength||0))+") "),r("el-tag",{attrs:{type:0===t.auditStatus?"warning":1===t.auditStatus?"success":"danger"}},[e._v(" "+e._s(2===t.auditStatus?t.auditNotice||"视频违规":t.auditStatusTitle)+" ")]),r("br")],1)})),0):r("span",[e._v("暂无")])],2),r("el-descriptions-item",{attrs:{span:2,contentStyle:{"text-align":"left"}}},[r("template",{slot:"label"},[e._v(" 课程分类 ")]),e.course.categoryStr&&(e.course.categoryStr||[]).length>0?r("span",e._l(e.course.categoryStr,(function(t,s){return r("span",{key:s},[e._v(" "),r("el-tag",[e._v(" "+e._s(t)+" ")]),r("br")],1)})),0):r("span",[e._v("暂无")])],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 课程简介 ")]),e._v(" "+e._s(e.course.introduction||"未设置")+" ")],2)],2):r("empty",[r("template",{slot:"info"},[r("div",{staticStyle:{"margin-top":"15px",color:"#97a8be",cursor:"pointer"}},[r("span",{on:{click:e.returnGo}},[e._v("返回上一页")])])])],2),r("el-dialog",{attrs:{title:"课程审核",visible:e.open,width:"400px"},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.auditForm,"label-width":"100",rules:e.rules}},[r("el-form-item",{attrs:{label:"审核决定",prop:"auditStatus"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择审核决定",clearable:""},model:{value:e.auditForm.auditStatus,callback:function(t){e.$set(e.auditForm,"auditStatus",t)},expression:"auditForm.auditStatus"}},e._l(e.auditOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),2===e.auditForm.auditStatus?r("el-form-item",{attrs:{label:"不通过原因",prop:"auditNotice"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入不通过原因",autosize:{minRows:3,maxRows:8}},model:{value:e.auditForm.auditNotice,callback:function(t){e.$set(e.auditForm,"auditNotice",t)},expression:"auditForm.auditNotice"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"danger"},on:{click:e.submitAudit}},[e._v("提交审核")]),r("el-button",{on:{click:e.cancelAudit}},[e._v("取 消")])],1)],1)],1)},i=[],a=(r("ac1f"),r("5319"),r("cabd")),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"empty-container"},[s("img",{staticClass:"empty-img",attrs:{src:r("e8b21"),alt:""}}),s("p",{staticClass:"empty-msg"},[e._v(" "+e._s(e.message)+" ")]),e._t("info")],2)},n=[],l={props:{message:{type:String,default:"暂无相关数据"}}},c=l,u=(r("b327"),r("2877")),d=Object(u["a"])(c,o,n,!1,null,"19f33356",null),p=d.exports,m=r("fa7d"),f={name:"index",components:{empty:p},data:function(){return{course:{},status:1,open:!1,auditOptions:[{value:1,label:"通过"},{value:2,label:"不通过"}],id:void 0,auditForm:{id:void 0,auditStatus:void 0,auditNotice:void 0},rules:{auditStatus:[{required:!0,message:"请选择审核决定",trigger:"change"}],auditNotice:[{required:!0,message:"请输入审核不通过原因",trigger:"blur"}]}}},created:function(){this.id=this.$route.query&&this.$route.query.id,this.status=this.$route.query&&this.$route.query.status,this.getDetail(this.id)},methods:{returnGo:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/course/course-list"})},openAudit:function(){this.open=!0},submitAudit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.auditForm.id=e.id,Object(a["b"])(e.auditForm).then((function(t){0===t.error&&(e.$message.success(t.msg),e.returnGo())})))}))},cancelAudit:function(){this.$refs.form.resetFields(),this.open=!1},getDetail:function(e){var t=this;Object(a["c"])({id:e}).then((function(e){if(0===e.error){var r=e||{},s=r.data;t.course=s||{}}}))}},filters:{filterSecond:function(e){return Object(m["b"])(e)}}},h=f,y=Object(u["a"])(h,s,i,!1,null,"d7fe238e",null);t["default"]=y.exports},bce5:function(e,t,r){"use strict";r("7fc8")},bd50:function(e,t,r){},be13:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:query"],expression:"['sys:course:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"审核状态",prop:"auditStatus"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("auditStatus")}},model:{value:e.queryParams.auditStatus,callback:function(t){e.$set(e.queryParams,"auditStatus",t)},expression:"queryParams.auditStatus"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.payStatus,attrs:{label:e.payStatusTitle,value:e.payStatus}})})),1)],1),r("el-form-item",{attrs:{label:"课程类型",prop:"type"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"类型",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("type")}},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.payType,attrs:{label:e.payTypeTitle,value:e.payType}})})),1)],1),r("el-form-item",{attrs:{label:"是否折扣",prop:"isDiscount"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"折扣",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("isDiscount")}},model:{value:e.queryParams.isDiscount,callback:function(t){e.$set(e.queryParams,"isDiscount",t)},expression:"queryParams.isDiscount"}},e._l(e.isDiscountOptions,(function(e){return r("el-option",{key:e.isDiscount,attrs:{label:e.isDiscountTitle,value:e.isDiscount}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:create"],expression:"['sys:course:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增课程 ")])],1),e.free>0?r("el-col",{staticStyle:{"margin-left":"50px","margin-top":"5px",width:"200px"}},[r("span",{staticStyle:{"font-weight":"bold"}},[e._v("免费课程："+e._s(e.free)+"门")])]):e._e(),e.unFree>0?r("el-col",{staticStyle:{"margin-top":"5px",width:"200px"}},[r("span",{staticStyle:{color:"#ff4949","font-weight":"bold"}},[e._v("付费课程： "+e._s(e.unFree)+"门")])]):e._e(),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:query"],expression:"['sys:course:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.courseList}},[r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center",width:"80","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"标题",prop:"title",align:"center",width:"300","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"封面",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.row.banner,"preview-src-list":[e.row.banner]}})]}}])}),r("el-table-column",{attrs:{label:"类型",prop:"note",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:2===t.row.type?"success":"info"}},[e._v(e._s(1===t.row.type?"免费课程":"付费课程"))])]}}])}),r("el-table-column",{attrs:{label:"课程原价",prop:"price",align:"center","show-overflow-tooltip":!0,width:"90"}}),r("el-table-column",{attrs:{label:"是否折扣",prop:"email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.isDiscount?"success":"danger"}},[e._v(e._s(1===t.row.isDiscount?"是":"否"))])]}}])}),r("el-table-column",{attrs:{label:"折扣价",prop:"discountPrice",align:"center","show-overflow-tooltip":!0,width:"90"}}),r("el-table-column",{attrs:{label:"审核状态",prop:"payTypeTitle",align:"center","show-overflow-tooltip":!0,width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.auditStatus?r("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"click",content:t.row.auditNotice}},[r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference",type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"},slot:"reference"},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过"))])],1):r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"}},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过"))])]}}])}),e.checkPermission(["sys:course:student:query"])?r("el-table-column",{attrs:{label:"学习人数",prop:"learnPersons",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.learnPersons>0?r("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(r){return e.goToStudent(t.row)}}},[e._v(e._s(t.row.learnPersons))]):r("span",[e._v(e._s(t.row.learnPersons))])]}}],null,!1,4203864245)}):e._e(),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:detail:view"],expression:"['sys:course:detail:view']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(r){return r.stopPropagation(),e.handleView(t.row)}}},[e._v("课程详情 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:query"],expression:"['sys:course:video:query']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"text",icon:"el-icon-video-camera"},on:{click:function(r){return r.stopPropagation(),e.handleVideoView(t.row)}}},[e._v("课程视频 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:update"],expression:"['sys:course:update']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return r.stopPropagation(),e.handleUpdate(t.row)}}},[e._v("修改课程 ")]),0===t.row.auditStatus?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:audit"],expression:"['sys:course:audit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-document-checked"},on:{click:function(r){return r.stopPropagation(),e.handleAudit(t.row)}}},[e._v("审核课程 ")]):e._e(),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:delete"],expression:"['sys:course:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return r.stopPropagation(),e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":"","before-close":e.cancel},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"课程名称",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"课程描述"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],a=r("cabd"),o={name:"Course",data:function(){return{loading:!0,ids:[],course:{},single:!0,multiple:!0,showSearch:!0,checkAll:!1,total:0,courseList:[],title:"",open:!1,openDataScope:!1,openMenuScope:!1,menuExpand:!1,menuNodeAll:!1,resourceExpand:!1,resourceNodeAll:!1,statusOptions:[{payStatus:1,payStatusTitle:"通过"},{payStatus:0,payStatusTitle:"未审核"},{payStatus:2,payStatusTitle:"不通过"}],typeOptions:[{payType:1,payTypeTitle:"免费"},{payType:2,payTypeTitle:"付费"}],isDiscountOptions:[{isDiscount:1,isDiscountTitle:"是"},{isDiscount:0,isDiscountTitle:"否"}],dateRange:[],unFree:0,free:0,queryParams:{page:1,pageSize:10,keyword:void 0,auditStatus:void 0,type:void 0,isDiscount:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{title:[{required:!0,message:"课程名称不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{handleVideoView:function(e){this.$router.push({path:"/course/video-list",query:{id:e.id},replace:!0})},goToStudent:function(e){this.$router.push({path:"/course/student-list",query:{id:e.id},replace:!0})},handleView:function(e){this.$router.push({path:"/course/detail",query:{id:e.id},replace:!0})},handleAudit:function(e){this.$router.push({path:"/course/detail",query:{id:e.id,status:e.auditStatus},replace:!0})},getList:function(){var e=this;this.loading=!0,Object(a["f"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount,n=i.extra;e.courseList=a||[],e.total=o||0;var l=n||[],c=l.free,u=l.unFree;e.unFree=u||0,e.free=c||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.courseList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},cancel:function(){this.open=!1,this.$refs["form"].clearValidate(),this.reset()},cancelDataScope:function(e){"menu"===e&&(this.openMenuScope=!1),"resource"===e&&(this.openDataScope=!1),this.reset()},reset:function(){void 0!==this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),void 0!==this.$refs.resource&&this.$refs.resource.setCheckedKeys([]),this.menuExpand=!1,this.menuNodeAll=!1,this.resourceExpand=!1,this.resourceNodeAll=!1,this.form={id:void 0,title:void 0,menuCollect:[],resourceCollect:[],note:""}},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleAdd:function(){this.$router.push({path:"/course/detail/add"})},handleUpdate:function(e){this.$router.push({path:"/course/detail/edit",query:{id:e.id,code:e.code}})},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.id?Object(a["h"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})):(e.form.menuCollect=void 0,e.form.resourceCollect=void 0,Object(a["a"])(e.form).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList())}))))}))},handleDelete:function(e){var t=this,r=e.id;this.$confirm('确认删除课程编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["e"])(e.id)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))}}},n=o,l=(r("c0f0"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,"f38aa980",null);t["default"]=c.exports},c070:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:student:query"],expression:"['sys:course:student:query']"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",{staticStyle:{"margin-left":"50px",width:"200px"}},[r("span",{staticStyle:{color:"#ff4949","font-weight":"bold","line-height":"36px"}},[e._v("课程总收入： ￥"+e._s(e.cost))])]),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{staticStyle:{"margin-right":"-1px"},attrs:{type:"primary",size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.studentList}},[r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center",width:"80","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"学生名称",prop:"userTitle",align:"center",width:"150","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"课程购买价格",prop:"cost",align:"center",width:"120","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"课程名称",align:"center",prop:"courseTitle",width:"350","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"累计学习时长(分钟)",prop:"note",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("filterSecond")(t.row.learnLength||0))+" ")]}}])}),r("el-table-column",{attrs:{label:"最近一次学习时间",align:"center",prop:"recentAt"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.recentAt))])]}}])}),r("el-table-column",{attrs:{label:"首次学习时间",align:"center",prop:"createdAt"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},i=[],a=r("cabd"),o=r("fa7d"),n={name:"StudentList",data:function(){return{loading:!0,student:{},total:0,studentList:[],queryParams:{page:1,pageSize:10,keyword:void 0,courseId:void 0},courseId:void 0,form:{},cost:0}},created:function(){var e=this.$route.query&&this.$route.query.id;e&&(this.courseId=e,this.queryParams.courseId=e),this.getList()},methods:{returnGo:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},getList:function(){var e=this;this.loading=!0,Object(a["g"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount,n=i.extra;e.studentList=a||[],e.total=o||0;var l=n||[],c=l.cost;e.cost=c||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.studentList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.queryParams.courseId=this.courseId,this.handleQuery()}},filters:{filterSecond:function(e){return Object(o["b"])(e)}}},l=n,c=r("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null);t["default"]=u.exports},c0c7:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"g",(function(){return n})),r.d(t,"f",(function(){return l})),r.d(t,"h",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return d}));var s=r("b775");function i(e){return Object(s["a"])({url:"/user/list",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/user/assign-role",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/user/delete",method:"post",data:{ids:e}})}function n(e){return Object(s["a"])({url:"/user/teacher-update",method:"post",data:e})}function l(e,t){var r={ids:e,password:t};return Object(s["a"])({url:"/user/reset-password",method:"post",data:r})}function c(e){return Object(s["a"])({url:"/user/update",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/user/create",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/user/teacher-info",method:"get",params:{id:e}})}},c0f0:function(e,t,r){"use strict";r("bd50")},c77b:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-descriptions",{attrs:{direction:"vertical",title:"添加课程"}},[r("template",{slot:"extra"},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:update"],expression:"['sys:course:update']"}],attrs:{type:"primary"},on:{click:e.checkSubmitCourse}},[e._v("提交")]),r("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.resetForm}},[e._v("重置")]),r("el-button",{attrs:{size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1)],2),r("el-form",{ref:"form",attrs:{model:e.courseForm,rules:e.rules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程名称",prop:"title"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入课程名称",autosize:{minRows:1,maxRows:6}},model:{value:e.courseForm.title,callback:function(t){e.$set(e.courseForm,"title",t)},expression:"courseForm.title"}})],1),r("el-form-item",{attrs:{label:"课程类型",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型",clearable:""},model:{value:e.courseForm.type,callback:function(t){e.$set(e.courseForm,"type",t)},expression:"courseForm.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.type,attrs:{label:e.title,value:e.type}})})),1)],1),2===e.courseForm.type?r("el-form-item",{attrs:{prop:"isDiscount",label:"是否折扣"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.isDiscount,callback:function(t){e.$set(e.courseForm,"isDiscount",t)},expression:"courseForm.isDiscount"}},e._l(e.isOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),r("el-form-item",{attrs:{prop:"recommend",label:"首页推荐"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.recommend,callback:function(t){e.$set(e.courseForm,"recommend",t)},expression:"courseForm.recommend"}},e._l(e.recommendOptions,(function(t){return r("el-option",{key:t.value,attrs:{disabled:1===t.value&&1===e.courseForm.type,label:t.label,value:t.value}})})),1)],1),e._l(e.extra.tips,(function(t,s){return r("el-form-item",{key:s,attrs:{label:"课程须知"+(s+1)}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:1,maxRows:6}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("i",0===s?{staticClass:"el-icon-circle-plus-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(t){return t.preventDefault(),e.addDomain("tips","课程须知最多六点",6)}}}:{staticClass:"el-icon-remove-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(r){return r.preventDefault(),e.removeDomain(t,"tips")}}})],1)}))],2),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程分类",prop:"categoryIds"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分类",options:e.options,props:{multiple:!0,emitPath:!1,value:"id",label:"title"},clearable:"",filterable:""},on:{change:e.changeCategory},model:{value:e.courseForm.categoryIds,callback:function(t){e.$set(e.courseForm,"categoryIds",t)},expression:"courseForm.categoryIds"}})],1),2===e.courseForm.type?r("el-form-item",{attrs:{label:"课程价格",prop:"price"}},[r("el-input",{attrs:{placeholder:"请输入课程价格"},model:{value:e.courseForm.price,callback:function(t){e.$set(e.courseForm,"price",t)},expression:"courseForm.price"}})],1):e._e(),1===e.courseForm.isDiscount?r("el-form-item",{attrs:{label:"折扣价格",prop:"discountPrice"}},[r("el-input",{attrs:{placeholder:"请输入课程折扣价格"},model:{value:e.courseForm.discountPrice,callback:function(t){e.$set(e.courseForm,"discountPrice",t)},expression:"courseForm.discountPrice"}})],1):e._e(),r("el-form-item",{attrs:{label:"是否完结",prop:"isFinish"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.courseForm.isFinish,callback:function(t){e.$set(e.courseForm,"isFinish",t)},expression:"courseForm.isFinish"}},e._l(e.isOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._l(e.extra.learn,(function(t,s){return r("el-form-item",{key:s,attrs:{label:"学到什么"+(s+1)}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:1,maxRows:6}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"domain.value"}}),r("i",0===s?{staticClass:"el-icon-circle-plus-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(t){return t.preventDefault(),e.addDomain("learn","学到什么最多10点",10)}}}:{staticClass:"el-icon-remove-outline",staticStyle:{cursor:"pointer","margin-left":"5px","margin-top":"12px",position:"absolute"},on:{click:function(r){return r.preventDefault(),e.removeDomain(t,"learn")}}})],1)}))],2),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"课程别名",prop:"alias"}},[r("el-input",{attrs:{placeholder:"请输入课程别名",autosize:{minRows:1,maxRows:6}},model:{value:e.courseForm.alias,callback:function(t){e.$set(e.courseForm,"alias",t)},expression:"courseForm.alias"}})],1),r("el-form-item",{attrs:{label:"课程简介",prop:"introduction"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:3,maxRows:8}},model:{value:e.courseForm.introduction,callback:function(t){e.$set(e.courseForm,"introduction",t)},expression:"courseForm.introduction"}})],1),r("el-form-item",{attrs:{label:"课程封面"}},[r("el-input",{staticStyle:{position:"absolute"},attrs:{type:"hidden"},model:{value:e.courseForm.banner,callback:function(t){e.$set(e.courseForm,"banner",t)},expression:"courseForm.banner"}}),e.courseForm.banner||e.isShow?r("image-upload",{ref:"banner",attrs:{"type-id":1,url:e.courseForm.banner},on:{uploadImage:e.uploadImage}}):e._e()],1),r("el-form-item",{attrs:{label:"课程详情背景"}},[r("el-input",{staticStyle:{position:"absolute"},attrs:{type:"hidden"},model:{value:e.courseForm.bgImg,callback:function(t){e.$set(e.courseForm,"bgImg",t)},expression:"courseForm.bgImg"}}),e.courseForm.bgImg||e.isShow?r("image-upload",{ref:"bgImg",attrs:{"type-id":2,url:e.courseForm.bgImg},on:{uploadImage:e.uploadImage}}):e._e()],1)],1)],1)],1)],1)},i=[],a=(r("ac1f"),r("5319"),r("d3b7"),r("159b"),r("a434"),r("d81d"),r("0835")),o=r("cabd"),n=r("03b3"),l={name:"edit",components:{ImageUpload:a["a"]},data:function(){return{extra:{tips:[{value:"",key:Date.now()}],learn:[{value:"",key:Date.now()}]},isShow:!1,options:[],courseForm:{title:void 0,alias:void 0,introduction:void 0,type:void 0,price:void 0,isFinish:void 0,isDiscount:void 0,discountPrice:void 0,recommend:void 0,categoryIds:[]},thisData:{},categoryIds:[],recommendOptions:[{value:1,label:"实战推荐"},{value:2,label:"新上好课"}],typeOptions:[{type:1,title:"免费"},{type:2,title:"付费"}],isOptions:[{value:1,label:"是"},{value:0,label:"否"}],rules:{title:[{required:!0,message:"课程名称不能为空",trigger:"blur"}],type:[{required:!0,message:"课程类型不能为空",trigger:"change"}],isDiscount:[{required:!0,message:"请选择是否折扣",trigger:"change"}],categoryIds:[{required:!0,message:"请选择课程分类",trigger:"change"}],discountPrice:[{required:!0,message:"请输入折扣价格",trigger:"blur"}],price:[{required:!0,message:"请输入课程价格",trigger:"blur"}]}}},created:function(){var e=this;if(Object(n["e"])().then((function(t){if(0===t.error){var r=t||{},s=r.data;e.options=s||[]}})),this.courseForm.id=this.$route.query&&this.$route.query.id,!this.courseForm.id)return this.$store.dispatch("tagsView/delView",this.$route),void this.$router.replace({path:"/course/course-list"});this.courseDetail(this.courseForm.id)},methods:{courseDetail:function(e){var t=this;Object(o["d"])({id:e}).then((function(e){if(0===e.error){var r=e||{},s=r.data;Object.assign(t.courseForm,s||{}),s.banner&&""!==s.banner&&s.bgImg&&""!==s.bgImg||(t.isShow=!0);var i=s.tipList||[];i.forEach((function(e,r){0!==r?t.extra.tips.push({value:e,key:Date.now()}):t.extra.tips[0].value=e}));var a=s.learnWhatList||[];a.forEach((function(e,r){0!==r?t.extra.learn.push({value:e,key:Date.now()}):t.extra.learn[0].value=e})),t.thisData=s}}))},uploadImage:function(e,t){1===t&&(this.courseForm.banner=e),2===t&&(this.courseForm.bgImg=e)},removeDomain:function(e,t){var r=this.extra[t].indexOf(e);-1!==r&&this.extra[t].splice(r,1)},changeCategory:function(e){this.categoryIds=e},addDomain:function(e,t,r){this.extra[e].length>=r?this.$message.warning(t):this.extra[e].push({value:"",key:Date.now()})},resetForm:function(){var e=this;this.courseForm={title:void 0,alias:void 0,introduction:void 0,type:void 0,price:void 0,isFinish:void 0,isDiscount:void 0,discountPrice:void 0,recommend:void 0,categoryIds:[]},Object.assign(this.$data.extra,this.$options.data().extra);var t=0,r=this.$refs.banner.fileList||[];r.forEach((function(r){r.url===e.thisData.banner&&(t=1)})),0===t&&this.$refs.banner.setFileList(this.thisData.banner);var s=0,i=this.$refs.bgImg.fileList||[];i.forEach((function(t){t.url===e.thisData.bgImg&&(s=1)})),0===s&&this.$refs.bgImg.setFileList(this.thisData.bgImg);var a=this.thisData.tipList||[];a.forEach((function(t,r){0!==r?e.extra.tips.push({value:t,key:Date.now()}):e.extra.tips[0].value=t}));var o=this.thisData.learnWhatList||[];o.forEach((function(t,r){0!==r?e.extra.learn.push({value:t,key:Date.now()}):e.extra.learn[0].value=t})),this.$refs.form.resetFields(),Object.assign(this.courseForm,this.thisData)},checkSubmitCourse:function(){var e=this;this.$confirm("提交更新课程将重新审核","警告",{confirmButtonText:"提交",cancelButtonText:"取消",type:"warning"}).then((function(){e.submitCourse()}))},submitCourse:function(){var e=this;this.$refs.form.validate((function(t){if(t){var r=Object.assign({},e.courseForm);r.tipList=e.getValue(e.extra.tips),r.learnWhatList=e.getValue(e.extra.learn),r.categoryIds=e.categoryIds,Object(o["h"])(r).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.$store.dispatch("tagsView/delView",e.$route),e.$router.replace({path:"/course/course-list"}))}))}}))},getValue:function(e){return e.map((function(e){return e.value}))},returnGo:function(){var e=this;this.$confirm("确定要放弃当前编辑的信息吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("tagsView/delView",e.$route),e.$router.replace({path:"/course/course-list"})}))}}},c=l,u=r("2877"),d=Object(u["a"])(c,s,i,!1,null,"0f570501",null);t["default"]=d.exports},cabd:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"h",(function(){return n})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"e",(function(){return d}));var s=r("b775");function i(e){return Object(s["a"])({url:"/course/list",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/course/student-list",method:"get",params:e})}function o(e){return Object(s["a"])({url:"/course/create",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/course/update",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/course/detail",method:"get",params:e})}function c(e){return Object(s["a"])({url:"/course/view",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/course/audit",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/course/delete",method:"post",data:{id:e}})}},cafe:function(e,t,r){},d383:function(e,t,r){"use strict";r("629e")},da3d:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:query"],expression:"['sys:course:video:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入关键词",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("keyword")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"审核状态",prop:"auditStatus"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("auditStatus")}},model:{value:e.queryParams.auditStatus,callback:function(t){e.$set(e.queryParams,"auditStatus",t)},expression:"queryParams.auditStatus"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.payStatus,attrs:{label:e.payStatusTitle,value:e.payStatus}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.returnGo}},[e._v("返回")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:create"],expression:"['sys:course:video:create']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增课程视频 ")])],1),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:query"],expression:"['sys:course:video:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.videoList}},[r("el-table-column",{attrs:{label:"编号",prop:"id",align:"center",width:"80","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"标题",prop:"title",align:"center",width:"250","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"封面",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"90px",height:"50px",border:"none"},attrs:{src:e.row.thumbUrl,"preview-src-list":[e.row.thumbUrl]}})]}}])}),r("el-table-column",{attrs:{label:"视频保存路径",prop:"fileUrl",align:"center",width:"200","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"视频大小",prop:"fileSizeTitle",align:"center",width:"100","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"视频长度(分钟)",prop:"title",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("filterSecond")(t.row.videoLength))+" ")]}}])}),r("el-table-column",{attrs:{label:"播放地址",prop:"title",align:"center",width:"80","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(r){return e.playVideo(t.row)}}},[r("i",{staticClass:"el-icon-video-camera"})])]}}])}),r("el-table-column",{attrs:{label:"审核状态",prop:"payTypeTitle",align:"center","show-overflow-tooltip":!0,width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.auditStatus?r("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"click",content:t.row.auditNotice}},[r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference",type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"},slot:"reference"},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过")+" ")])],1):r("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:0===t.row.auditStatus?"warning":1===t.row.auditStatus?"success":"danger"}},[e._v(" "+e._s(0===t.row.auditStatus?"未审核":1===t.row.auditStatus?"审核通过":"审核不通过")+" ")])]}}])}),e.checkPermission(["sys:course:video:student:query"])?r("el-table-column",{attrs:{label:"学习人数",prop:"learnPersons",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.learnPersons>0?r("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:function(r){return e.goToStudent(t.row)}}},[e._v(e._s(t.row.learnPersons))]):r("span",[e._v(e._s(t.row.learnPersons))])]}}],null,!1,4203864245)}):e._e(),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:update"],expression:"['sys:course:video:update']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return r.stopPropagation(),e.handleUpdate(t.row)}}},[e._v("修改视频 ")]),0===t.row.auditStatus?r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:audit"],expression:"['sys:course:video:audit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-document-checked"},on:{click:function(r){return r.stopPropagation(),e.handleAudit(t.row)}}},[e._v("审核视频 ")]):e._e(),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:course:video:delete"],expression:"['sys:course:video:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return r.stopPropagation(),e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:"视频播放",visible:e.openVideo,width:"700px"},on:{"update:visible":function(t){e.openVideo=t},close:e.cancelVideo}},[e.openVideo?r("video-player",{attrs:{video:e.currentData}}):e._e()],1),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"700px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.open=t},close:e.cancelOpen}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100",rules:e.rules}},[r("el-row",{staticStyle:{height:"160px!important",overflow:"hidden"},attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"视频标题",prop:"title"}},[r("el-input",{attrs:{disabled:e.isAudit,type:"textarea",placeholder:"请输入视频标题",autosize:{minRows:6,maxRows:6}},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"视频封面",prop:"thumbUrl"}},[e.form.thumbUrl||e.isShow?r("image-upload",{ref:"bgImg",attrs:{"type-id":2,url:e.form.thumbUrl,isAudit:e.isAudit},on:{uploadImage:e.uploadImage}}):e._e()],1)],1)],1),r("el-form-item",{attrs:{label:"视频",prop:"url"}},[r("el-input",{staticStyle:{width:"10px"},attrs:{type:"hidden"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}}),e._v(" "+e._s(e.form.url)+" "),e.form.url&&""!==e.form.url?r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"text"},on:{click:function(t){return e.playVideo({url:e.form.url,thumbUrl:e.form.thumbUrl})}}},[r("i",{staticClass:"el-icon-video-camera"})]):e._e(),e.open&&!e.isAudit?r("video-upload",{ref:"videoUpload",on:{videoInfo:e.videoInfo}}):e._e()],1),e.isAudit?r("el-form-item",{attrs:{label:"审核决定",prop:"auditStatus"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择审核决定",clearable:""},model:{value:e.form.auditStatus,callback:function(t){e.$set(e.form,"auditStatus",t)},expression:"form.auditStatus"}},e._l(e.auditOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),2===e.form.auditStatus?r("el-form-item",{attrs:{label:"不通过原因",prop:"auditNotice"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入不通过原因",autosize:{minRows:3,maxRows:8}},model:{value:e.form.auditNotice,callback:function(t){e.$set(e.form,"auditNotice",t)},expression:"form.auditNotice"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isAudit?r("el-button",{attrs:{type:"danger"},on:{click:e.submitForm}},[e._v("提交审核")]):r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提 交")]),r("el-button",{on:{click:e.cancelOpen}},[e._v("取 消")])],1)],1)],1)},i=[],a=(r("ac1f"),r("5319"),r("2879")),o=r("fa7d"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})],1)},l=[],c=r("d6d3"),u=(r("fda2"),{props:{video:{type:Object,require:!0}},data:function(){return{paused:!0,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{src:this.video.url,type:"video/mp4"}],poster:this.video.thumbUrl,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0}}}},components:{videoPlayer:c["videoPlayer"]},watch:{video:{handler:function(e,t){e.url&&(this.playerOptions.sources[0].src=e.url),e.thumbUrl&&(this.playerOptions.poster=e.thumbUrl)},immediate:!0}}}),d=u,p=(r("32e1"),r("2877")),m=Object(p["a"])(d,n,l,!1,null,null,null),f=m.exports,h=r("0835"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("uploader",{staticClass:"uploader-example",attrs:{autoStart:!1,options:e.options,"file-status-text":e.statusText},on:{"file-complete":e.fileComplete,complete:e.complete,"file-success":e.fileSuccess,"files-added":e.filesAdded,"file-removed":e.fileRemoved,"file-error":e.onFileError}},[r("uploader-unsupport"),r("uploader-drop",[r("p",[e._v("将文件拖到此处，或点击下方按钮上传视频")]),r("uploader-btn",[e._v("选择视频")])],1),r("uploader-files")],1),r("br"),e.fileList.length>0?r("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.allRemove}},[e._v("移除视频")]):e._e()],1)},v=[],g=(r("b0c0"),r("d3b7"),r("159b"),r("d81d"),r("99af"),r("69a0")),b=r.n(g),w=r("5f87"),x=r("3f5e"),k={data:function(){var e=this;return{skip:!1,options:{target:"//localhost/api/v3/upload/chunk",chunkSize:"10485760",testChunks:!0,headers:{Authorization:Object(w["a"])()},parseTimeRemaining:function(e,t){return t.replace(/\syears?/,"年").replace(/\days?/,"天").replace(/\shours?/,"小时").replace(/\sminutes?/,"分钟").replace(/\sseconds?/,"秒")},checkChunkUploadedByResponse:function(t,r){var s=JSON.parse(r);return s.data.skipUpload?(e.skip=!0,!0):(s.data.uploaded||[]).indexOf(t.offset+1)>=0}},attrs:{accept:"image/*"},statusText:{success:"上传成功",error:"上传出错了",uploading:"上传中...",paused:"暂停中...",waiting:"等待中...",cmd5:"计算文件MD5中..."},fileList:[],disabled:!0}},watch:{fileList:function(e,t){this.disabled=!1}},methods:{fileRemoved:function(){this.fileList=[]},onFileError:function(){1!==this.fileList.length&&(this.fileList=[])},fileSuccess:function(e,t,r,s){var i=this;Object(x["b"])({identifier:t.uniqueIdentifier,filename:t.name,totalChunks:s.offset}).then((function(e){0===e.error&&i.$emit("videoInfo",e.data)})).catch((function(e){}))},fileComplete:function(e){},complete:function(){},filesAdded:function(e,t,r){var s=this;if((e||[]).length>1)return this.$message.error("只能上传一个视频"),void(e.ignored=!0);var i=e[0].name.substring(e[0].name.lastIndexOf(".")+1);return"mp4"!==i?(this.$message.error("请上传MP4格式的视频文件"),void(e.ignored=!0)):this.fileList.length>=1?(this.$message.error("只能上传一个视频"),void(e.ignored=!0)):void e.forEach((function(e){s.fileList.push(e),s.computeMD5(e)}))},allRemove:function(){this.fileList.map((function(e){e.cancel()})),this.fileList=[]},computeMD5:function(e){var t=new FileReader,r=(new Date).getTime(),s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=0,a=10485760,o=Math.ceil(e.size/a),n=new b.a.ArrayBuffer;function l(){var r=i*a,o=r+a>=e.size?e.size:r+a;t.readAsArrayBuffer(s.call(e.file,r,o))}e.cmd5=!0,e.pause(),l(),t.onload=function(t){if(n.append(t.target.result),i<o)i++,l();else{var s=n.end();console.log("MD5计算完毕：".concat(e.name," \nMD5：").concat(s," \n分片：").concat(o," 大小:").concat(e.size," 用时：").concat((new Date).getTime()-r," ms")),n.destroy(),e.uniqueIdentifier=s,e.cmd5=!1,e.resume()}},t.onerror=function(){this.error("文件".concat(e.name,"读取出错，请检查该文件")),e.cancel()}}}},_=k,S=(r("d383"),Object(p["a"])(_,y,v,!1,null,null,null)),$=S.exports,q={name:"Course",data:function(){return{loading:!0,currentData:{},ids:[],course:{},single:!0,multiple:!0,showSearch:!0,checkAll:!1,isAudit:!1,total:0,videoList:[],title:"",openVideo:!1,open:!1,openUpload:!1,statusOptions:[{payStatus:1,payStatusTitle:"通过"},{payStatus:0,payStatusTitle:"未审核"},{payStatus:2,payStatusTitle:"不通过"}],id:void 0,auditOptions:[{value:1,label:"通过"},{value:2,label:"不通过"}],queryParams:{page:1,pageSize:10,keyword:void 0,auditStatus:void 0},isShow:!1,form:{title:void 0,thumbUrl:"http://localhost/image/default.png",url:void 0,auditStatus:void 0,auditNotice:void 0},rules:{title:[{required:!0,message:"请输入视频标题",trigger:"blur"}],url:[{required:!0,message:"请上传课程视频",trigger:"change"}],auditStatus:[{required:!0,message:"请选择审核决定",trigger:"change"}],auditNotice:[{required:!0,message:"请输入审核不通过原因",trigger:"blur"}]}}},components:{videoPlayer:f,imageUpload:h["a"],videoUpload:$},created:function(){var e=this.$route.query&&this.$route.query.id;e?(this.id=e,this.queryParams.courseId=e,this.getList()):(this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/course/course-list"}))},methods:{videoInfo:function(e){this.form.url=e.url,this.form.fileUrl=e.fileUrl,this.form.fileSize=e.fileSize,this.form.videoLength=e.videoLength},allRemove:function(){this.$refs.videoUpload.allRemove()},returnGo:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.replace({path:"/course/course-list"})},cancelUpload:function(){this.openUpload=!1},goToStudent:function(e){this.$router.push({path:"/course/video-student-list",query:{id:e.id},replace:!0})},handleAudit:function(e){this.title="审核视频",this.open=!0,Object.assign(this.form,e),this.form.auditStatus=1,this.isAudit=!0},uploadImage:function(e){e?this.form.thumbUrl=e:(this.form.thumbUrl=e,this.isShow=!0)},playVideo:function(e){this.openVideo=!0,this.currentData=e},cancelOpen:function(){this.open=!1,this.form={title:void 0,url:void 0,auditStatus:void 0,auditNotice:void 0},this.isAudit=!1,this.isShow=!1,this.$refs.form.resetFields()},cancelVideo:function(){this.openVideo=!1},getList:function(){var e=this;this.loading=!0,Object(a["d"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount;e.videoList=a||[],e.total=o||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.videoList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.queryParams.courseId=this.id,this.handleQuery()},handleAdd:function(){this.open=!0,this.form.courseId=this.id,this.form.thumbUrl="http://localhost/image/default.png",this.title="添加课程视频",this.isShow=!1},handleUpdate:function(e){this.open=!0,Object.assign(this.form,e),this.title="修改课程视频",this.isShow=!1},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){if(e.isAudit)return e.isShow=!1,void Object(a["b"])(e.form).then((function(t){0===t.error&&(e.$message.success(t.msg),e.open=!1,e.getList())}));void 0!==e.form.id?Object(a["f"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})):(e.form.menuCollect=void 0,e.form.resourceCollect=void 0,Object(a["a"])(e.form).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList())})))}}))},handleDelete:function(e){var t=this,r=e.id;this.$confirm('确认删除视频编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(a["c"])(e.id)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))}},filters:{filterSecond:function(e){return Object(o["b"])(e)}}},P=q,O=(r("414e"),Object(p["a"])(P,s,i,!1,null,"38a05116",null));t["default"]=O.exports},e2c8:function(e,t,r){},e8b2:function(e,t,r){},e8b21:function(e,t,r){e.exports=r.p+"static/img/empty.328a0b79.jpg"},e964:function(e,t,r){},ea75:function(e,t,r){},ebfd:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"permission",rawName:"v-permission",value:["sys:order:query"],expression:"['sys:order:query']"},{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"订单号",prop:"code"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入订单号",clearable:"",size:"small"},on:{clear:function(t){return e.clearParams("code")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),r("el-form-item",{attrs:{label:"订单状态",prop:"payStatus"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("payStatus")}},model:{value:e.queryParams.payStatus,callback:function(t){e.$set(e.queryParams,"payStatus",t)},expression:"queryParams.payStatus"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.payStatus,attrs:{label:e.payStatusTitle,value:e.payStatus}})})),1)],1),r("el-form-item",{attrs:{label:"支付方式",prop:"payType"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"方式",clearable:"",size:"small"},on:{change:e.getList,clear:function(t){return e.clearParams("payType")}},model:{value:e.queryParams.payType,callback:function(t){e.$set(e.queryParams,"payType",t)},expression:"queryParams.payType"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.payType,attrs:{label:e.payTypeTitle,value:e.payType}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[e.totalCost>0?r("el-col",{staticStyle:{"margin-top":"5px",width:"200px"}},[r("span",{staticStyle:{"font-weight":"bold"}},[e._v("订单总额： ￥"+e._s(e.totalCost))])]):e._e(),e.payCost>0?r("el-col",{staticStyle:{"margin-top":"5px",width:"200px"}},[r("span",{staticStyle:{color:"#ff4949","font-weight":"bold"}},[e._v("交易总额： ￥"+e._s(e.payCost))])]):e._e(),r("right-toolbar",{directives:[{name:"permission",rawName:"v-permission",value:["sys:order:query"],expression:"['sys:order:query']"}],attrs:{"show-search":e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.orderList},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{label:"订单编号",prop:"id",align:"center",width:"100","show-overflow-tooltip":!0,sortable:""}}),r("el-table-column",{attrs:{label:"订单号",prop:"code",align:"center",width:"200"}}),r("el-table-column",{attrs:{label:"订单用户",prop:"userTitle",align:"center","show-overflow-tooltip":!0,width:"150"}}),r("el-table-column",{attrs:{label:"订单金额(元)",prop:"cost",align:"center","show-overflow-tooltip":!0,width:"100"}}),r("el-table-column",{attrs:{label:"订单状态",prop:"note",align:"center","show-overflow-tooltip":!0,width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.payStatus?"success":0===t.row.payStatus?"info":"danger"}},[e._v(e._s(t.row.payStatusTitle))])]}}])}),r("el-table-column",{attrs:{label:"支付方式",prop:"payTypeTitle",align:"center","show-overflow-tooltip":!0,width:"90"}}),r("el-table-column",{attrs:{label:"支付时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.payAt))])]}}])}),r("el-table-column",{attrs:{label:"失效时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.expiredAt))])]}}])}),r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.createdAt))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:order:detail:query"],expression:"['sys:order:detail:query']"}],attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(r){return e.handleView(t.row)}}},[e._v("订单详情 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:order:update"],expression:"['sys:order:update']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["sys:order:delete"],expression:"['sys:order:delete']"}],staticStyle:{color:"#F56C6C"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize,layout:"total, prev, pager, next"},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px","append-to-body":"","before-close":e.cancel},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"角色描述"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},i=[],a=(r("d81d"),r("f8b7")),o={name:"Order",data:function(){return{loading:!0,ids:[],order:{},single:!0,multiple:!0,showSearch:!0,checkAll:!1,total:0,orderList:[],title:"",open:!1,openDataScope:!1,openMenuScope:!1,menuExpand:!1,menuNodeAll:!1,resourceExpand:!1,resourceNodeAll:!1,statusOptions:[{payStatus:1,payStatusTitle:"已完成"},{payStatus:0,payStatusTitle:"未支付"},{payStatus:2,payStatusTitle:"已取消"}],typeOptions:[{payType:1,payTypeTitle:"余额"},{payType:3,payTypeTitle:"微信"},{payType:2,payTypeTitle:"支付宝"}],dateRange:[],payCost:0,totalCost:0,queryParams:{page:1,pageSize:10,code:void 0,payStatus:void 0,payType:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{title:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{handleView:function(e){this.$router.push({path:"/order/detail-list",query:{id:e.id,code:e.code},replace:!0})},getList:function(){var e=this;this.loading=!0,Object(a["d"])(this.queryParams).then((function(t){if(0===t.error){var r=t||[],s=r.data,i=s||[],a=i.items,o=i.totalCount,n=i.extra;e.orderList=a||[],e.total=o||0;var l=n||[],c=l.totalCost,u=l.payCost;e.payCost=u||0,e.totalCost=c||0,e.loading=!1}})).catch((function(){e.loading=!1,e.total=0,e.orderList=[]}))},clearParams:function(e){this.queryParams[e]=void 0,this.handleQuery()},cancel:function(){this.open=!1,this.$refs["form"].clearValidate(),this.reset()},cancelDataScope:function(e){"menu"===e&&(this.openMenuScope=!1),"resource"===e&&(this.openDataScope=!1),this.reset()},reset:function(){void 0!==this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),void 0!==this.$refs.resource&&this.$refs.resource.setCheckedKeys([]),this.menuExpand=!1,this.menuNodeAll=!1,this.resourceExpand=!1,this.resourceNodeAll=!1,this.form={id:void 0,title:void 0,menuCollect:[],resourceCollect:[],note:""}},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],Object.assign(this.$data.queryParams,this.$options.data().queryParams),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),1!==e.length?this.single=!0:(this.single=!1,this.order=e[0]),this.multiple=!e.length},handTopUpdate:function(){this.handleUpdate(this.order)},handleUpdate:function(e){this.reset(),Object.assign(this.form,e),this.open=!0,this.title="修改角色"},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.id?Object(a["e"])(e.form).then((function(t){e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList()})):(e.form.menuCollect=void 0,e.form.resourceCollect=void 0,Object(a["a"])(e.form).then((function(t){0===t.error&&(e.$message({message:t.msg,type:"success"}),e.open=!1,e.getList())}))))}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$confirm('确认删除角色编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.id?Object(a["b"])([e.id]):Object(a["b"])(r)})).then((function(e){t.getList(),t.$message({message:e.msg,type:"success"})}))}}},n=o,l=(r("9811"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,"f1bdef60",null);t["default"]=c.exports},ef3c:function(e,t,r){"use strict";r.r(t);r("ac1f"),r("5319");var s,i,a={created:function(){var e=this.$route,t=e.params,r=e.query,s=t.path;this.$router.replace({path:"/"+s,query:r})},render:function(e){return e()}},o=a,n=r("2877"),l=Object(n["a"])(o,s,i,!1,null,null,null);t["default"]=l.exports},f8b7:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return l}));var s=r("b775");function i(e){return Object(s["a"])({url:"/order/list",method:"get",params:e})}function a(e){return Object(s["a"])({url:"/order/create",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/order/update",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/order/detail-list",method:"get",params:e})}function l(e){return Object(s["a"])({url:"/order/delete",method:"post",data:{resourceCollect:e}})}},faa5:function(e,t,r){}}]);