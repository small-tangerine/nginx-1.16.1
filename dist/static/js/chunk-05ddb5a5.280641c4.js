(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05ddb5a5"],{"0778":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"inline-block"}},[s("el-dialog",{attrs:{visible:e.dialog,"close-on-click-modal":!1,"before-close":e.cancel,title:e.title,"append-to-body":"",width:"475px"},on:{"update:visible":function(t){e.dialog=t},close:e.cancel}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"88px"}},[s("el-form-item",{attrs:{label:"新邮箱",prop:"email"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"on"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("el-button",{attrs:{loading:e.codeLoading,disabled:e.isDisabled,size:"small"},on:{click:e.sendCode}},[e._v(e._s(e.buttonName))])],1),s("el-form-item",{attrs:{label:"验证码",prop:"code"}},[s("el-input",{staticStyle:{width:"320px"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),s("el-form-item",{attrs:{label:"当前密码",prop:"userPassword"}},[s("el-input",{staticStyle:{width:"320px"},attrs:{type:"password"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword",t)},expression:"form.userPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("提交")]),s("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},o=[],i=s("c24f"),a={name:"UpdateEmail",props:{email:{type:String,required:!0,default:""}},data:function(){var e=function(e,t,s){""===t||null===t?s(new Error("新邮箱不能为空")):s()};return{loading:!1,dialog:!1,title:"修改邮箱",form:{userPassword:void 0,email:void 0,code:void 0},user:{email:"",password:""},codeLoading:!1,buttonName:"获取验证码",isDisabled:!1,time:60,timestamp:0,rules:{userPassword:[{required:!0,message:"当前密码不能为空",trigger:"blur"}],email:[{required:!0,validator:e,trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},sendCode:function(){var e=this;this.$refs.form.validateField("email",(function(t){if(t)return!1;e.codeLoading=!0,e.buttonName="验证码发送中";var s=e;e.codeLoading=!1,e.isDisabled=!0,e.buttonName=e.time--+"秒后重新发送",e.timer=window.setInterval((function(){s.buttonName=s.time+"秒后重新发送",--s.time,s.time<0&&(s.buttonName="重新发送",s.time=60,s.isDisabled=!1,window.clearInterval(s.timer))}),1e3)}))},doSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(i["g"])({email:e.form.email,verifyCode:e.form.code,password:e.form.userPassword}).then((function(t){if(0===t.error){var s=t.data;e.$message.success(t.msg),e.$emit("update-link","email",e.form.email,s.isUpdateUsername||!1),e.resetForm(),e.codeLoading=!1}}))}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName="获取验证码",this.isDisabled=!1,this.form={userPassword:"",email:"",code:""}}}},l=a,n=s("2877"),c=Object(n["a"])(l,r,o,!1,null,"1183fae7",null);t["default"]=c.exports},"15b9":function(e,t,s){},"2dde":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:e.$t("profile.nickName"),prop:"nickname"}},[s("el-input",{staticStyle:{width:"50%"},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),s("el-form-item",{attrs:{label:e.$t("profile.phone"),prop:"mobile"}},[s("span",[e._v(e._s(e.user.mobile))]),s("span",[s("a",{on:{click:function(t){e.$refs.phone.dialog=!0}}},[e._v("修改手机")])])]),s("el-form-item",{attrs:{label:e.$t("profile.email"),prop:"email"}},[s("span",[e._v(e._s(e.user.email))]),s("span",[s("a",{on:{click:function(t){e.$refs.email.dialog=!0}}},[e._v("修改邮箱")])])]),s("el-form-item",{attrs:{label:e.$t("profile.sex")}},[s("el-radio-group",{model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[s("span",[e._v(e._s(typeof e.user.sex))]),s("el-radio",{attrs:{label:"unknown"}},[e._v(e._s(e.$t("profile.unknown")))]),s("el-radio",{attrs:{label:"male"}},[e._v(e._s(e.$t("profile.man")))]),s("el-radio",{attrs:{label:"female"}},[e._v(e._s(e.$t("profile.female")))])],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(e._s(e.$t("profile.save")))]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v(e._s(e.$t("profile.close")))])],1),s("update-email",{ref:"email",attrs:{email:e.user.email},on:{"update-link":e.changeNew}}),s("update-phone",{ref:"phone",attrs:{phone:e.user.mobile},on:{"update-link":e.changeNew}})],1)},o=[],i=s("0778"),a=s("b59f"),l=s("c24f"),n={components:{UpdatePhone:a["default"],UpdateEmail:i["default"]},props:{user:{type:Object,default:void 0}},data:function(){return{rules:{nickname:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(l["f"])({sex:e.user.sex,nickname:e.user.nickname}).then((function(t){0===t.error&&e.$message.success(t.msg)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/dashboard"})},changeNew:function(e,t,s){this.$emit("change-link",e,t,s)}}},c=n,u=(s("7bd5"),s("2877")),d=Object(u["a"])(c,r,o,!1,null,"0ec40789",null);t["default"]=d.exports},3823:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:e.$t("profile.oldPassword"),prop:"oldPassword"}},[s("el-input",{attrs:{placeholder:e.$t("profile.oldPwdTip"),type:"password"},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword",t)},expression:"user.oldPassword"}})],1),s("el-form-item",{attrs:{label:e.$t("profile.newPassword"),prop:"newPassword"}},[s("el-input",{attrs:{placeholder:e.$t("profile.newPwdTip"),type:"password"},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword",t)},expression:"user.newPassword"}})],1),s("el-form-item",{attrs:{label:e.$t("profile.confirm"),prop:"confirmPassword"}},[s("el-input",{attrs:{placeholder:e.$t("profile.confirmPwdTip"),type:"password"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(e._s(e.$t("profile.save")))]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v(e._s(e.$t("profile.close")))])],1)],1)},o=[],i=s("7f87"),a={data:function(){var e=this,t=function(t,s,r){e.user.newPassword!==s?r(new Error("两次输入的密码不一致")):r()};return{user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&t&&Object(i["a"])({password:e.user.newPassword,oldPassword:e.user.oldPassword,checkPassword:e.user.confirmPassword}).then((function(t){0===t.error&&(e.$message.success(t.msg),e.$refs.form.resetFields())}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/dashboard"})}}},l=a,n=s("2877"),c=Object(n["a"])(l,r,o,!1,null,null,null);t["default"]=c.exports},"7bd5":function(e,t,s){"use strict";s("15b9")},"864b":function(e,t,s){},"88c9":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{on:{click:function(t){return e.editCropper()}}},[s("img",{staticClass:"img-circle img-lg",attrs:{src:e.avatar,title:"点击上传头像",alt:""}})]),s("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.open=t},opened:e.modalOpened}},[s("el-row",[s("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[e.visible?s("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,"auto-crop":e.options.autoCrop,"auto-crop-width":e.options.autoCropWidth,"auto-crop-height":e.options.autoCropHeight,"fixed-box":e.options.fixedBox,"info-true":!0,enlarge:"1"},on:{realTime:e.realTime}}):e._e()],1),s("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[s("div",{staticClass:"avatar-upload-preview"},[s("img",{style:e.previews.img,attrs:{src:e.previews.url,alt:""}})])])],1),s("br"),s("el-row",[s("el-col",{attrs:{lg:2,md:2}},[s("el-upload",{attrs:{action:"#","http-request":e.requestUpload,"show-file-list":!1,"before-upload":e.beforeUpload}},[s("el-button",{attrs:{size:"small"}},[e._v(" 上传 "),s("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),s("el-col",{attrs:{lg:{span:1,offset:2},md:2}},[s("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.changeScale(1)}}})],1),s("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[s("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.changeScale(-1)}}})],1),s("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[s("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(t){return e.rotateLeft()}}})],1),s("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[s("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){return e.rotateRight()}}})],1),s("el-col",{attrs:{lg:{span:2,offset:6},md:2}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uploadImg()}}},[e._v("提 交")])],1)],1)],1)],1)},o=[],i=(s("b0c0"),s("4360")),a=s("7e79"),l=s("ed08"),n=s("c24f"),c={components:{VueCropper:a["VueCropper"]},data:function(){return{fileName:Object(l["d"])(i["a"].getters.avatar),open:!1,visible:!0,title:"修改头像",options:{img:i["a"].getters.avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},computed:{avatar:function(){return i["a"].getters.avatar}},methods:{editCropper:function(){this.open=!0},modalOpened:function(){this.visible=!0},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload:function(e){var t=this;if(-1===e.type.indexOf("image/"))this.$message.error("请上传正确的图片");else{this.fileName=e.name;var s=new FileReader;s.readAsDataURL(e),s.onload=function(){t.options.img=s.result}}},uploadImg:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var s=new FormData;s.append("image",t,e.fileName),Object(n["j"])(s).then((function(t){0===t.error&&(e.$message.success(t.msg),e.open=!1,e.options.img=t.data.url,e.previews.url=t.data.url,i["a"].commit("user/SET_AVATAR",t.data.url),e.visible=!1)}))}))},realTime:function(e){this.previews=e}}},u=c,d=s("2877"),m=Object(d["a"])(u,r,o,!1,null,null,null);t["default"]=m.exports},b330:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"讲师名称",prop:"name"}},[s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入讲师名称"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),s("el-form-item",{attrs:{label:"讲师职位",prop:"job"}},[s("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入讲师职位"},model:{value:e.user.job,callback:function(t){e.$set(e.user,"job",t)},expression:"user.job"}})],1),s("el-form-item",{attrs:{label:"讲师简介",prop:"introduction"}},[s("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.user.introduction,callback:function(t){e.$set(e.user,"introduction",t)},expression:"user.introduction"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(e._s(e.$t("profile.save")))]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v(e._s(e.$t("profile.close")))])],1)],1)},o=[],i=(s("b0c0"),s("0778")),a=s("b59f"),l=s("c24f"),n={components:{UpdatePhone:a["default"],UpdateEmail:i["default"]},props:{user:{type:Object,default:void 0}},data:function(){return{rules:{name:[{required:!0,message:"讲师名称不能为空",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(l["i"])({job:e.user.job,name:e.user.name,introduction:e.user.introduction}).then((function(t){0===t.error&&e.$message.success(t.msg)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/dashboard"})}}},c=n,u=(s("d7f6"),s("2877")),d=Object(u["a"])(c,r,o,!1,null,"2e4579fe",null);t["default"]=d.exports},b59f:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"inline-block"}},[s("el-dialog",{attrs:{visible:e.dialog,"close-on-click-modal":!1,"before-close":e.cancel,title:e.title,"append-to-body":"",width:"475px"},on:{"update:visible":function(t){e.dialog=t},close:e.cancel}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"88px"}},[s("el-form-item",{attrs:{label:"新手机号",prop:"phone"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"on"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),s("el-button",{attrs:{loading:e.codeLoading,disabled:e.isDisabled,size:"small"},on:{click:e.sendCode}},[e._v(e._s(e.buttonName))])],1),s("el-form-item",{attrs:{label:"验证码",prop:"code"}},[s("el-input",{staticStyle:{width:"320px"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),s("el-form-item",{attrs:{label:"当前密码",prop:"userPassword"}},[s("el-input",{staticStyle:{width:"320px"},attrs:{type:"password"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword",t)},expression:"form.userPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("提交")]),s("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},o=[],i=s("c24f"),a={name:"UpdatePhone",props:{phone:{type:String,required:!0,default:""}},data:function(){var e=function(e,t,s){""===t||null===t?s(new Error("新手机号不能为空")):s()},t=function(e,t,s){""===t||null===t?s(new Error("请输入密码")):s()},s=function(e,t,s){""===t||null===t?s(new Error("请输入验证码")):s()};return{loading:!1,dialog:!1,title:"修改手机号",form:{userPassword:"",phone:"",code:""},codeLoading:!1,buttonName:"获取验证码",isDisabled:!1,time:60,timestamp:0,rules:{userPassword:[{required:!0,validator:t,trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}],code:[{required:!0,validator:s,trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},sendCode:function(){var e=this;this.$refs.form.validateField("phone",(function(t){if(t)return!1;e.codeLoading=!0,e.buttonName="验证码发送中";var s=e;e.codeLoading=!1,e.isDisabled=!0,e.buttonName=e.time--+"秒后重新发送",e.timer=window.setInterval((function(){s.buttonName=s.time+"秒后重新发送",--s.time,s.time<0&&(s.buttonName="重新发送",s.time=60,s.isDisabled=!1,window.clearInterval(s.timer))}),1e3)}))},doSubmit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(i["h"])({mobile:e.form.phone,verifyCode:e.form.code,password:e.form.userPassword}).then((function(t){if(0===t.error){var s=t.data;e.$message.success(t.msg),e.$emit("update-link","phone",e.form.phone,s.isUpdateUsername||!1),e.resetForm(),e.codeLoading=!1}}))}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName="获取验证码",this.isDisabled=!1,this.form={userPassword:"",phone:"",code:""}}}},l=a,n=s("2877"),c=Object(n["a"])(l,r,o,!1,null,"32504dd0",null);t["default"]=c.exports},d7f6:function(e,t,s){"use strict";s("864b")},ecac:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:6,xs:24,sm:10,md:8,lg:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("profile.profile")))])]),s("div",[s("div",{staticClass:"text-center"},[s("userAvatar")],1),s("ul",{staticClass:"list-group list-group-striped"},[s("li",{staticClass:"list-group-item"},[s("svg-icon",{attrs:{"icon-class":"user"}}),e._v(" "+e._s(e.$t("profile.account"))+" "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.userInfo.username))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{attrs:{"icon-class":"phone"}}),e._v(" "+e._s(e.$t("profile.phone"))+" "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.userInfo.mobile))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{attrs:{"icon-class":"email"}}),e._v(" "+e._s(e.$t("profile.email"))+" "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.userInfo.email))])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v(" "+e._s(e.$t("profile.role"))+" "),s("div",{staticClass:"pull-right"},[e._v(" "+e._s(e.userInfo.roleTitle)+" ")])],1),s("li",{staticClass:"list-group-item"},[s("svg-icon",{attrs:{"icon-class":"date"}}),e._v(" "+e._s(e.$t("profile.create"))+" "),s("div",{staticClass:"pull-right"},[e._v(e._s(e.userInfo.createdAt))])],1)])])])],1),s("el-col",{attrs:{span:18,sm:14,md:16,xs:24,lg:18}},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("profile.baseInfo")))])]),s("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("el-tab-pane",{attrs:{label:e.$t("profile.baseInfo"),name:"userinfo"}},[s("userInfo",{attrs:{user:e.userInfo},on:{"change-link":e.changeLink}})],1),s("el-tab-pane",{attrs:{label:e.$t("profile.changePassword"),name:"resetPwd"}},[s("resetPwd",{attrs:{user:e.userInfo}})],1),2===e.userInfo.roleId&&e.userInfo.teacherInfo?s("el-tab-pane",{attrs:{label:"讲师信息",name:"teacher"}},[s("teacher-info",{attrs:{user:e.userInfo.teacherInfo}})],1):e._e()],1)],1)],1)],1)],1)},o=[],i=s("5530"),a=s("88c9"),l=s("2dde"),n=s("3823"),c=s("2f62"),u=s("b330"),d={name:"Profile",components:{userAvatar:a["default"],userInfo:l["default"],resetPwd:n["default"],teacherInfo:u["default"]},data:function(){return{user:{},activeTab:"userinfo"}},computed:Object(i["a"])({},Object(c["b"])(["userInfo"])),methods:{changeLink:function(e,t,s){"email"===e&&(this.userInfo.email=t),"phone"===e&&(this.userInfo.mobile=t),s&&(this.userInfo.username=t)}}},m=d,f=s("2877"),p=Object(f["a"])(m,r,o,!1,null,null,null);t["default"]=p.exports}}]);